/* automatically generated by JSCoverage - do not edit */
try {
  if (typeof top === 'object' && top !== null && typeof top.opener === 'object' && top.opener !== null) {
    // this is a browser window that was opened from another window

    if (! top.opener._$jscoverage) {
      top.opener._$jscoverage = {};
    }
  }
}
catch (e) {}

try {
  if (typeof top === 'object' && top !== null) {
    // this is a browser window

    try {
      if (typeof top.opener === 'object' && top.opener !== null && top.opener._$jscoverage) {
        top._$jscoverage = top.opener._$jscoverage;
      }
    }
    catch (e) {}

    if (! top._$jscoverage) {
      top._$jscoverage = {};
    }
  }
}
catch (e) {}

try {
  if (typeof top === 'object' && top !== null && top._$jscoverage) {
    _$jscoverage = top._$jscoverage;
  }
}
catch (e) {}
if (typeof _$jscoverage !== 'object') {
  _$jscoverage = {};
}
if (! _$jscoverage['js/userinterface.js']) {
  _$jscoverage['js/userinterface.js'] = [];
  _$jscoverage['js/userinterface.js'][2] = 0;
  _$jscoverage['js/userinterface.js'][3] = 0;
  _$jscoverage['js/userinterface.js'][4] = 0;
  _$jscoverage['js/userinterface.js'][7] = 0;
  _$jscoverage['js/userinterface.js'][8] = 0;
  _$jscoverage['js/userinterface.js'][10] = 0;
  _$jscoverage['js/userinterface.js'][12] = 0;
  _$jscoverage['js/userinterface.js'][13] = 0;
  _$jscoverage['js/userinterface.js'][14] = 0;
  _$jscoverage['js/userinterface.js'][16] = 0;
  _$jscoverage['js/userinterface.js'][17] = 0;
  _$jscoverage['js/userinterface.js'][20] = 0;
  _$jscoverage['js/userinterface.js'][21] = 0;
  _$jscoverage['js/userinterface.js'][23] = 0;
  _$jscoverage['js/userinterface.js'][24] = 0;
  _$jscoverage['js/userinterface.js'][26] = 0;
  _$jscoverage['js/userinterface.js'][27] = 0;
  _$jscoverage['js/userinterface.js'][29] = 0;
  _$jscoverage['js/userinterface.js'][30] = 0;
  _$jscoverage['js/userinterface.js'][32] = 0;
  _$jscoverage['js/userinterface.js'][38] = 0;
  _$jscoverage['js/userinterface.js'][43] = 0;
  _$jscoverage['js/userinterface.js'][44] = 0;
  _$jscoverage['js/userinterface.js'][47] = 0;
  _$jscoverage['js/userinterface.js'][48] = 0;
  _$jscoverage['js/userinterface.js'][50] = 0;
  _$jscoverage['js/userinterface.js'][51] = 0;
  _$jscoverage['js/userinterface.js'][52] = 0;
  _$jscoverage['js/userinterface.js'][55] = 0;
  _$jscoverage['js/userinterface.js'][56] = 0;
  _$jscoverage['js/userinterface.js'][59] = 0;
  _$jscoverage['js/userinterface.js'][62] = 0;
  _$jscoverage['js/userinterface.js'][63] = 0;
  _$jscoverage['js/userinterface.js'][65] = 0;
  _$jscoverage['js/userinterface.js'][72] = 0;
  _$jscoverage['js/userinterface.js'][78] = 0;
  _$jscoverage['js/userinterface.js'][79] = 0;
  _$jscoverage['js/userinterface.js'][80] = 0;
  _$jscoverage['js/userinterface.js'][81] = 0;
  _$jscoverage['js/userinterface.js'][83] = 0;
  _$jscoverage['js/userinterface.js'][84] = 0;
  _$jscoverage['js/userinterface.js'][85] = 0;
  _$jscoverage['js/userinterface.js'][86] = 0;
  _$jscoverage['js/userinterface.js'][88] = 0;
  _$jscoverage['js/userinterface.js'][89] = 0;
  _$jscoverage['js/userinterface.js'][91] = 0;
  _$jscoverage['js/userinterface.js'][92] = 0;
  _$jscoverage['js/userinterface.js'][94] = 0;
  _$jscoverage['js/userinterface.js'][96] = 0;
  _$jscoverage['js/userinterface.js'][99] = 0;
  _$jscoverage['js/userinterface.js'][101] = 0;
  _$jscoverage['js/userinterface.js'][102] = 0;
  _$jscoverage['js/userinterface.js'][105] = 0;
  _$jscoverage['js/userinterface.js'][106] = 0;
  _$jscoverage['js/userinterface.js'][109] = 0;
  _$jscoverage['js/userinterface.js'][110] = 0;
  _$jscoverage['js/userinterface.js'][112] = 0;
  _$jscoverage['js/userinterface.js'][113] = 0;
  _$jscoverage['js/userinterface.js'][114] = 0;
  _$jscoverage['js/userinterface.js'][116] = 0;
  _$jscoverage['js/userinterface.js'][118] = 0;
  _$jscoverage['js/userinterface.js'][119] = 0;
  _$jscoverage['js/userinterface.js'][122] = 0;
  _$jscoverage['js/userinterface.js'][123] = 0;
  _$jscoverage['js/userinterface.js'][124] = 0;
  _$jscoverage['js/userinterface.js'][125] = 0;
  _$jscoverage['js/userinterface.js'][126] = 0;
  _$jscoverage['js/userinterface.js'][128] = 0;
  _$jscoverage['js/userinterface.js'][131] = 0;
  _$jscoverage['js/userinterface.js'][132] = 0;
  _$jscoverage['js/userinterface.js'][133] = 0;
  _$jscoverage['js/userinterface.js'][140] = 0;
  _$jscoverage['js/userinterface.js'][141] = 0;
  _$jscoverage['js/userinterface.js'][142] = 0;
  _$jscoverage['js/userinterface.js'][144] = 0;
  _$jscoverage['js/userinterface.js'][146] = 0;
  _$jscoverage['js/userinterface.js'][147] = 0;
  _$jscoverage['js/userinterface.js'][149] = 0;
  _$jscoverage['js/userinterface.js'][153] = 0;
  _$jscoverage['js/userinterface.js'][154] = 0;
  _$jscoverage['js/userinterface.js'][155] = 0;
  _$jscoverage['js/userinterface.js'][158] = 0;
  _$jscoverage['js/userinterface.js'][159] = 0;
  _$jscoverage['js/userinterface.js'][160] = 0;
  _$jscoverage['js/userinterface.js'][163] = 0;
  _$jscoverage['js/userinterface.js'][165] = 0;
  _$jscoverage['js/userinterface.js'][166] = 0;
  _$jscoverage['js/userinterface.js'][167] = 0;
  _$jscoverage['js/userinterface.js'][168] = 0;
  _$jscoverage['js/userinterface.js'][170] = 0;
  _$jscoverage['js/userinterface.js'][171] = 0;
  _$jscoverage['js/userinterface.js'][172] = 0;
  _$jscoverage['js/userinterface.js'][174] = 0;
  _$jscoverage['js/userinterface.js'][176] = 0;
  _$jscoverage['js/userinterface.js'][180] = 0;
  _$jscoverage['js/userinterface.js'][181] = 0;
  _$jscoverage['js/userinterface.js'][184] = 0;
  _$jscoverage['js/userinterface.js'][185] = 0;
  _$jscoverage['js/userinterface.js'][191] = 0;
  _$jscoverage['js/userinterface.js'][192] = 0;
  _$jscoverage['js/userinterface.js'][195] = 0;
  _$jscoverage['js/userinterface.js'][196] = 0;
  _$jscoverage['js/userinterface.js'][203] = 0;
  _$jscoverage['js/userinterface.js'][204] = 0;
  _$jscoverage['js/userinterface.js'][207] = 0;
  _$jscoverage['js/userinterface.js'][208] = 0;
  _$jscoverage['js/userinterface.js'][209] = 0;
  _$jscoverage['js/userinterface.js'][210] = 0;
  _$jscoverage['js/userinterface.js'][213] = 0;
  _$jscoverage['js/userinterface.js'][214] = 0;
  _$jscoverage['js/userinterface.js'][218] = 0;
  _$jscoverage['js/userinterface.js'][219] = 0;
  _$jscoverage['js/userinterface.js'][220] = 0;
  _$jscoverage['js/userinterface.js'][225] = 0;
  _$jscoverage['js/userinterface.js'][226] = 0;
  _$jscoverage['js/userinterface.js'][240] = 0;
  _$jscoverage['js/userinterface.js'][248] = 0;
  _$jscoverage['js/userinterface.js'][254] = 0;
  _$jscoverage['js/userinterface.js'][255] = 0;
  _$jscoverage['js/userinterface.js'][256] = 0;
  _$jscoverage['js/userinterface.js'][263] = 0;
  _$jscoverage['js/userinterface.js'][264] = 0;
  _$jscoverage['js/userinterface.js'][265] = 0;
  _$jscoverage['js/userinterface.js'][266] = 0;
  _$jscoverage['js/userinterface.js'][267] = 0;
  _$jscoverage['js/userinterface.js'][269] = 0;
  _$jscoverage['js/userinterface.js'][270] = 0;
  _$jscoverage['js/userinterface.js'][274] = 0;
  _$jscoverage['js/userinterface.js'][275] = 0;
  _$jscoverage['js/userinterface.js'][276] = 0;
  _$jscoverage['js/userinterface.js'][278] = 0;
  _$jscoverage['js/userinterface.js'][279] = 0;
  _$jscoverage['js/userinterface.js'][286] = 0;
  _$jscoverage['js/userinterface.js'][288] = 0;
  _$jscoverage['js/userinterface.js'][289] = 0;
  _$jscoverage['js/userinterface.js'][291] = 0;
  _$jscoverage['js/userinterface.js'][293] = 0;
  _$jscoverage['js/userinterface.js'][294] = 0;
  _$jscoverage['js/userinterface.js'][296] = 0;
  _$jscoverage['js/userinterface.js'][309] = 0;
  _$jscoverage['js/userinterface.js'][315] = 0;
  _$jscoverage['js/userinterface.js'][316] = 0;
  _$jscoverage['js/userinterface.js'][317] = 0;
  _$jscoverage['js/userinterface.js'][318] = 0;
  _$jscoverage['js/userinterface.js'][319] = 0;
  _$jscoverage['js/userinterface.js'][322] = 0;
  _$jscoverage['js/userinterface.js'][323] = 0;
  _$jscoverage['js/userinterface.js'][325] = 0;
  _$jscoverage['js/userinterface.js'][328] = 0;
  _$jscoverage['js/userinterface.js'][329] = 0;
  _$jscoverage['js/userinterface.js'][331] = 0;
  _$jscoverage['js/userinterface.js'][332] = 0;
  _$jscoverage['js/userinterface.js'][334] = 0;
  _$jscoverage['js/userinterface.js'][335] = 0;
  _$jscoverage['js/userinterface.js'][337] = 0;
  _$jscoverage['js/userinterface.js'][338] = 0;
  _$jscoverage['js/userinterface.js'][340] = 0;
  _$jscoverage['js/userinterface.js'][343] = 0;
  _$jscoverage['js/userinterface.js'][346] = 0;
  _$jscoverage['js/userinterface.js'][348] = 0;
  _$jscoverage['js/userinterface.js'][349] = 0;
  _$jscoverage['js/userinterface.js'][351] = 0;
  _$jscoverage['js/userinterface.js'][352] = 0;
  _$jscoverage['js/userinterface.js'][353] = 0;
  _$jscoverage['js/userinterface.js'][356] = 0;
  _$jscoverage['js/userinterface.js'][358] = 0;
  _$jscoverage['js/userinterface.js'][359] = 0;
  _$jscoverage['js/userinterface.js'][360] = 0;
  _$jscoverage['js/userinterface.js'][361] = 0;
  _$jscoverage['js/userinterface.js'][362] = 0;
  _$jscoverage['js/userinterface.js'][366] = 0;
  _$jscoverage['js/userinterface.js'][367] = 0;
  _$jscoverage['js/userinterface.js'][374] = 0;
  _$jscoverage['js/userinterface.js'][386] = 0;
  _$jscoverage['js/userinterface.js'][389] = 0;
  _$jscoverage['js/userinterface.js'][400] = 0;
  _$jscoverage['js/userinterface.js'][401] = 0;
  _$jscoverage['js/userinterface.js'][403] = 0;
  _$jscoverage['js/userinterface.js'][404] = 0;
  _$jscoverage['js/userinterface.js'][405] = 0;
  _$jscoverage['js/userinterface.js'][408] = 0;
  _$jscoverage['js/userinterface.js'][416] = 0;
  _$jscoverage['js/userinterface.js'][418] = 0;
  _$jscoverage['js/userinterface.js'][420] = 0;
  _$jscoverage['js/userinterface.js'][422] = 0;
  _$jscoverage['js/userinterface.js'][427] = 0;
  _$jscoverage['js/userinterface.js'][429] = 0;
  _$jscoverage['js/userinterface.js'][430] = 0;
  _$jscoverage['js/userinterface.js'][434] = 0;
  _$jscoverage['js/userinterface.js'][437] = 0;
  _$jscoverage['js/userinterface.js'][438] = 0;
  _$jscoverage['js/userinterface.js'][439] = 0;
  _$jscoverage['js/userinterface.js'][441] = 0;
  _$jscoverage['js/userinterface.js'][442] = 0;
  _$jscoverage['js/userinterface.js'][443] = 0;
  _$jscoverage['js/userinterface.js'][444] = 0;
  _$jscoverage['js/userinterface.js'][445] = 0;
  _$jscoverage['js/userinterface.js'][446] = 0;
  _$jscoverage['js/userinterface.js'][452] = 0;
  _$jscoverage['js/userinterface.js'][453] = 0;
  _$jscoverage['js/userinterface.js'][454] = 0;
  _$jscoverage['js/userinterface.js'][455] = 0;
  _$jscoverage['js/userinterface.js'][456] = 0;
  _$jscoverage['js/userinterface.js'][459] = 0;
  _$jscoverage['js/userinterface.js'][460] = 0;
  _$jscoverage['js/userinterface.js'][464] = 0;
  _$jscoverage['js/userinterface.js'][465] = 0;
  _$jscoverage['js/userinterface.js'][466] = 0;
  _$jscoverage['js/userinterface.js'][470] = 0;
  _$jscoverage['js/userinterface.js'][471] = 0;
  _$jscoverage['js/userinterface.js'][476] = 0;
  _$jscoverage['js/userinterface.js'][514] = 0;
  _$jscoverage['js/userinterface.js'][523] = 0;
  _$jscoverage['js/userinterface.js'][533] = 0;
  _$jscoverage['js/userinterface.js'][534] = 0;
  _$jscoverage['js/userinterface.js'][535] = 0;
  _$jscoverage['js/userinterface.js'][536] = 0;
  _$jscoverage['js/userinterface.js'][545] = 0;
  _$jscoverage['js/userinterface.js'][546] = 0;
  _$jscoverage['js/userinterface.js'][547] = 0;
  _$jscoverage['js/userinterface.js'][550] = 0;
  _$jscoverage['js/userinterface.js'][555] = 0;
  _$jscoverage['js/userinterface.js'][556] = 0;
  _$jscoverage['js/userinterface.js'][563] = 0;
  _$jscoverage['js/userinterface.js'][564] = 0;
  _$jscoverage['js/userinterface.js'][573] = 0;
  _$jscoverage['js/userinterface.js'][574] = 0;
  _$jscoverage['js/userinterface.js'][576] = 0;
  _$jscoverage['js/userinterface.js'][577] = 0;
  _$jscoverage['js/userinterface.js'][580] = 0;
  _$jscoverage['js/userinterface.js'][583] = 0;
  _$jscoverage['js/userinterface.js'][586] = 0;
  _$jscoverage['js/userinterface.js'][587] = 0;
  _$jscoverage['js/userinterface.js'][588] = 0;
  _$jscoverage['js/userinterface.js'][589] = 0;
  _$jscoverage['js/userinterface.js'][616] = 0;
  _$jscoverage['js/userinterface.js'][617] = 0;
  _$jscoverage['js/userinterface.js'][628] = 0;
  _$jscoverage['js/userinterface.js'][632] = 0;
  _$jscoverage['js/userinterface.js'][633] = 0;
  _$jscoverage['js/userinterface.js'][634] = 0;
  _$jscoverage['js/userinterface.js'][635] = 0;
  _$jscoverage['js/userinterface.js'][639] = 0;
  _$jscoverage['js/userinterface.js'][640] = 0;
  _$jscoverage['js/userinterface.js'][641] = 0;
  _$jscoverage['js/userinterface.js'][642] = 0;
  _$jscoverage['js/userinterface.js'][643] = 0;
  _$jscoverage['js/userinterface.js'][644] = 0;
  _$jscoverage['js/userinterface.js'][645] = 0;
  _$jscoverage['js/userinterface.js'][646] = 0;
  _$jscoverage['js/userinterface.js'][647] = 0;
  _$jscoverage['js/userinterface.js'][648] = 0;
  _$jscoverage['js/userinterface.js'][649] = 0;
  _$jscoverage['js/userinterface.js'][650] = 0;
  _$jscoverage['js/userinterface.js'][651] = 0;
  _$jscoverage['js/userinterface.js'][652] = 0;
  _$jscoverage['js/userinterface.js'][657] = 0;
  _$jscoverage['js/userinterface.js'][664] = 0;
  _$jscoverage['js/userinterface.js'][667] = 0;
  _$jscoverage['js/userinterface.js'][668] = 0;
  _$jscoverage['js/userinterface.js'][674] = 0;
  _$jscoverage['js/userinterface.js'][675] = 0;
  _$jscoverage['js/userinterface.js'][676] = 0;
  _$jscoverage['js/userinterface.js'][681] = 0;
  _$jscoverage['js/userinterface.js'][682] = 0;
  _$jscoverage['js/userinterface.js'][684] = 0;
  _$jscoverage['js/userinterface.js'][685] = 0;
  _$jscoverage['js/userinterface.js'][688] = 0;
  _$jscoverage['js/userinterface.js'][689] = 0;
  _$jscoverage['js/userinterface.js'][695] = 0;
  _$jscoverage['js/userinterface.js'][699] = 0;
  _$jscoverage['js/userinterface.js'][700] = 0;
  _$jscoverage['js/userinterface.js'][703] = 0;
  _$jscoverage['js/userinterface.js'][706] = 0;
  _$jscoverage['js/userinterface.js'][707] = 0;
  _$jscoverage['js/userinterface.js'][709] = 0;
  _$jscoverage['js/userinterface.js'][710] = 0;
  _$jscoverage['js/userinterface.js'][712] = 0;
  _$jscoverage['js/userinterface.js'][718] = 0;
}
_$jscoverage['js/userinterface.js'].source = ["<span class=\"c\">//GOOGLE Globals</span>","<span class=\"k\">var</span> geocoder<span class=\"k\">;</span>","<span class=\"k\">var</span> map<span class=\"k\">;</span>","<span class=\"k\">var</span> manager<span class=\"k\">;</span>","","<span class=\"c\">//EMPANADA Globals</span>","<span class=\"k\">var</span> lat <span class=\"k\">=</span> <span class=\"s\">25.75906</span><span class=\"k\">,</span> lng <span class=\"k\">=</span> <span class=\"k\">-</span><span class=\"s\">80.37388</span><span class=\"k\">,</span> zoom <span class=\"k\">=</span> <span class=\"s\">14</span><span class=\"k\">,</span> rad <span class=\"k\">=</span> <span class=\"s\">1</span><span class=\"k\">;</span>","<span class=\"k\">var</span> refresh<span class=\"k\">=</span><span class=\"s\">\"refresh.php\"</span><span class=\"k\">;</span>","<span class=\"c\">//var refresh=\"http://empanada.cs.fiu.edu:81/cache\";</span>","<span class=\"k\">var</span> jsonF<span class=\"k\">=</span><span class=\"s\">\"json/filters.json\"</span><span class=\"k\">;</span>","","<span class=\"k\">var</span> mypos<span class=\"k\">;</span>","<span class=\"k\">var</span> LOG<span class=\"k\">=</span><span class=\"k\">false</span><span class=\"k\">;</span>","<span class=\"k\">var</span> live<span class=\"k\">=</span><span class=\"k\">false</span><span class=\"k\">;</span>","","<span class=\"k\">function</span> color<span class=\"k\">(</span>n<span class=\"k\">)</span><span class=\"k\">{</span>","\t<span class=\"k\">switch</span><span class=\"k\">(</span><span class=\"k\">true</span><span class=\"k\">)</span>","\t<span class=\"k\">{</span>","\t\t<span class=\"k\">case</span> <span class=\"k\">(</span>n<span class=\"k\">==</span><span class=\"s\">666</span><span class=\"k\">):</span>","\t\t\t<span class=\"k\">return</span> <span class=\"s\">\"\"</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t<span class=\"k\">case</span> <span class=\"k\">(</span>n<span class=\"k\">&gt;</span><span class=\"s\">6</span><span class=\"k\">):</span>","\t\t\t<span class=\"k\">return</span> <span class=\"s\">\"red/\"</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t<span class=\"k\">case</span> <span class=\"k\">(</span>n<span class=\"k\">&gt;</span><span class=\"s\">4</span> <span class=\"k\">&amp;&amp;</span> n<span class=\"k\">&lt;</span><span class=\"s\">7</span><span class=\"k\">):</span>","\t\t\t<span class=\"k\">return</span> <span class=\"s\">\"orange/\"</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t<span class=\"k\">case</span> <span class=\"k\">(</span>n<span class=\"k\">&lt;</span><span class=\"s\">5</span><span class=\"k\">):</span>","\t\t\t<span class=\"k\">return</span> <span class=\"s\">\"green/\"</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t<span class=\"k\">default</span><span class=\"k\">:</span>","\t\t\t<span class=\"k\">return</span> <span class=\"s\">\"\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span>","<span class=\"k\">}</span>","","","<span class=\"c\">//SINGLETON</span>","<span class=\"k\">var</span> Markers <span class=\"k\">=</span> <span class=\"k\">{</span>","    markers<span class=\"k\">:</span> <span class=\"k\">[],</span>","    markerst<span class=\"k\">:</span> <span class=\"k\">[],</span>","    window<span class=\"k\">:</span> <span class=\"k\">null</span><span class=\"k\">,</span>","    closeAll<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">()</span><span class=\"k\">{</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>Markers<span class=\"k\">.</span>window<span class=\"k\">)</span>","            Markers<span class=\"k\">.</span>window<span class=\"k\">.</span>close<span class=\"k\">();</span>","\t<span class=\"k\">}</span><span class=\"k\">,</span>","    toggle<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>category<span class=\"k\">,</span> t<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>window<span class=\"k\">)</span>","            <span class=\"k\">this</span><span class=\"k\">.</span>window<span class=\"k\">.</span>close<span class=\"k\">();</span>","","        <span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> i <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> i <span class=\"k\">&lt;</span> <span class=\"k\">this</span><span class=\"k\">.</span>markers<span class=\"k\">.</span>length<span class=\"k\">;</span> i<span class=\"k\">++)</span>","            <span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>markerst<span class=\"k\">[</span>i<span class=\"k\">]</span> <span class=\"k\">==</span> category<span class=\"k\">)</span>","                <span class=\"k\">this</span><span class=\"k\">.</span>markers<span class=\"k\">[</span>i<span class=\"k\">].</span>setVisible<span class=\"k\">(</span>t<span class=\"k\">);</span>","    <span class=\"k\">}</span><span class=\"k\">,</span>","    push<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>m<span class=\"k\">,</span> f<span class=\"k\">,</span> c<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>markers<span class=\"k\">.</span>push<span class=\"k\">(</span>m<span class=\"k\">);</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>markerst<span class=\"k\">.</span>push<span class=\"k\">(</span>f<span class=\"k\">);</span>","","","        google<span class=\"k\">.</span>maps<span class=\"k\">.</span>event<span class=\"k\">.</span>addListener<span class=\"k\">(</span>m<span class=\"k\">,</span> <span class=\"s\">'click'</span><span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","","            <span class=\"c\">//close infobubble if we click on other bubble</span>","            <span class=\"k\">if</span> <span class=\"k\">(</span>Markers<span class=\"k\">.</span>window<span class=\"k\">)</span>","                Markers<span class=\"k\">.</span>window<span class=\"k\">.</span>close<span class=\"k\">();</span>","","            Markers<span class=\"k\">.</span>window <span class=\"k\">=</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>InfoWindow<span class=\"k\">(</span><span class=\"k\">{</span>","                content<span class=\"k\">:</span> c<span class=\"k\">,</span>","                arrowStyle<span class=\"k\">:</span> <span class=\"s\">2</span><span class=\"k\">,</span>","                arrowSize<span class=\"k\">:</span> <span class=\"s\">10</span><span class=\"k\">,</span>","                ShadowStyle<span class=\"k\">:</span> <span class=\"s\">1</span>","","            <span class=\"k\">}</span><span class=\"k\">);</span>","            Markers<span class=\"k\">.</span>window<span class=\"k\">.</span>open<span class=\"k\">(</span>map<span class=\"k\">,</span> m<span class=\"k\">);</span>","        <span class=\"k\">}</span><span class=\"k\">);</span>","    <span class=\"k\">}</span>","<span class=\"k\">}</span>","","<span class=\"c\">//SINGLETON</span>","<span class=\"k\">var</span> legend<span class=\"k\">;</span>","<span class=\"k\">function</span> Legend<span class=\"k\">(</span>parent<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">var</span> _this <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">;</span>","    <span class=\"k\">var</span> forbidden <span class=\"k\">=</span> <span class=\"s\">\"image/forbidden.png\"</span><span class=\"k\">;</span>","","    <span class=\"k\">var</span> filters <span class=\"k\">=</span> <span class=\"k\">[];</span>","    <span class=\"k\">var</span> prefilters<span class=\"k\">;</span>","    <span class=\"k\">var</span> icons<span class=\"k\">;</span>","    <span class=\"k\">var</span> collapsed<span class=\"k\">=</span><span class=\"k\">false</span><span class=\"k\">;</span>","    ","    <span class=\"k\">this</span><span class=\"k\">.</span>isCollapsed <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span><span class=\"k\">{</span><span class=\"k\">return</span> collapsed<span class=\"k\">}</span><span class=\"k\">;</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>setCollapsed <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>v<span class=\"k\">)</span><span class=\"k\">{</span>","\t\t<span class=\"c\">//alert(_this.htmlObj.style.height);</span>","\t\t<span class=\"k\">if</span><span class=\"k\">(</span>v<span class=\"k\">)</span>","\t\t\t_this<span class=\"k\">.</span>htmlObj<span class=\"k\">.</span>style<span class=\"k\">.</span>height <span class=\"k\">=</span> <span class=\"s\">'20px'</span><span class=\"k\">;</span>","\t\t<span class=\"k\">else</span>","\t\t\t_this<span class=\"k\">.</span>htmlObj<span class=\"k\">.</span>style<span class=\"k\">.</span>height <span class=\"k\">=</span> <span class=\"s\">''</span><span class=\"k\">;</span>","\t\t","\t\tcollapsed<span class=\"k\">=</span>v<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","    ","    <span class=\"k\">this</span><span class=\"k\">.</span>htmlObj <span class=\"k\">=</span> parent<span class=\"k\">;</span>","","    <span class=\"k\">this</span><span class=\"k\">.</span>add <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>item<span class=\"k\">)</span> <span class=\"k\">{</span>","        filters<span class=\"k\">.</span>push<span class=\"k\">(</span>item<span class=\"k\">);</span>","    <span class=\"k\">}</span><span class=\"k\">;</span>","","    <span class=\"k\">this</span><span class=\"k\">.</span>remove <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>item<span class=\"k\">)</span> <span class=\"k\">{</span>","        filters<span class=\"k\">.</span>splice<span class=\"k\">(</span>filters<span class=\"k\">.</span>indexOf<span class=\"k\">(</span>item<span class=\"k\">),</span> <span class=\"s\">1</span><span class=\"k\">);</span>","    <span class=\"k\">}</span><span class=\"k\">;</span>","","    <span class=\"k\">this</span><span class=\"k\">.</span>getFilters <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","        <span class=\"k\">return</span> filters<span class=\"k\">;</span>","    <span class=\"k\">}</span><span class=\"k\">;</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>getIcons <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>key<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">if</span><span class=\"k\">(</span>key<span class=\"k\">==</span><span class=\"s\">'raw'</span><span class=\"k\">)</span>","\t\t\t<span class=\"k\">return</span> <span class=\"s\">'letter_t.png'</span>","\t\t<span class=\"k\">else</span>\t","\t\t\t<span class=\"k\">return</span> icons<span class=\"k\">[</span>key<span class=\"k\">].</span>icon<span class=\"k\">;</span>","    <span class=\"k\">}</span><span class=\"k\">;</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>setPreFilters <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>f<span class=\"k\">)</span> <span class=\"k\">{</span>","        prefilters <span class=\"k\">=</span> f<span class=\"k\">.</span>split<span class=\"k\">(</span><span class=\"s\">\",\"</span><span class=\"k\">);</span>","        <span class=\"c\">//alert(prefilters);</span>","    <span class=\"k\">}</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>toggle <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>obj<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">var</span> name <span class=\"k\">=</span> obj<span class=\"k\">.</span>id<span class=\"k\">.</span>toLowerCase<span class=\"k\">().</span>split<span class=\"k\">(</span><span class=\"s\">'_'</span><span class=\"k\">)[</span><span class=\"s\">0</span><span class=\"k\">];</span>","        <span class=\"k\">if</span> <span class=\"k\">(</span>obj<span class=\"k\">.</span>innerHTML <span class=\"k\">==</span> <span class=\"s\">''</span><span class=\"k\">)</span> <span class=\"k\">{</span>","            obj<span class=\"k\">.</span>innerHTML <span class=\"k\">=</span> <span class=\"s\">'&lt;img src=\"'</span> <span class=\"k\">+</span> forbidden <span class=\"k\">+</span> <span class=\"s\">'\"&gt;'</span><span class=\"k\">;</span>","            <span class=\"k\">this</span><span class=\"k\">.</span>remove<span class=\"k\">(</span>name<span class=\"k\">);</span>","            <span class=\"c\">//toggleMarkers(name,false);</span>","            Markers<span class=\"k\">.</span>toggle<span class=\"k\">(</span>name<span class=\"k\">,</span> <span class=\"k\">false</span><span class=\"k\">);</span>","        <span class=\"k\">}</span>","        <span class=\"k\">else</span> <span class=\"k\">{</span>","            obj<span class=\"k\">.</span>innerHTML <span class=\"k\">=</span> <span class=\"s\">''</span><span class=\"k\">;</span>","            <span class=\"k\">this</span><span class=\"k\">.</span>add<span class=\"k\">(</span>name<span class=\"k\">);</span>","            Markers<span class=\"k\">.</span>toggle<span class=\"k\">(</span>name<span class=\"k\">,</span> <span class=\"k\">true</span><span class=\"k\">);</span>","        <span class=\"k\">}</span>","    <span class=\"k\">}</span><span class=\"k\">;</span>","","","    ","    ","    <span class=\"k\">var</span> lTitle <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'div'</span><span class=\"k\">);</span>","    lTitle<span class=\"k\">.</span>innerHTML<span class=\"k\">=</span><span class=\"s\">\"Legend\"</span>","\tparent<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>lTitle<span class=\"k\">);</span>","","\tlTitle<span class=\"k\">.</span>onclick <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">//alert(_this.isCollapsed());</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(!</span>_this<span class=\"k\">.</span>isCollapsed<span class=\"k\">())</span>","\t\t\t_this<span class=\"k\">.</span>setCollapsed<span class=\"k\">(</span><span class=\"k\">true</span><span class=\"k\">);</span>","\t\t<span class=\"k\">else</span>","\t\t\t_this<span class=\"k\">.</span>setCollapsed<span class=\"k\">(</span><span class=\"k\">false</span><span class=\"k\">);</span>","\t<span class=\"k\">}</span> ","    ","     ","    <span class=\"k\">var</span> xmlHttp <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","    xmlHttp<span class=\"k\">.</span>onreadystatechange <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>par<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">if</span> <span class=\"k\">(</span>xmlHttp<span class=\"k\">.</span>readyState <span class=\"k\">==</span> <span class=\"s\">4</span> <span class=\"k\">&amp;&amp;</span> xmlHttp<span class=\"k\">.</span>status <span class=\"k\">==</span> <span class=\"s\">200</span><span class=\"k\">)</span>","        <span class=\"k\">{</span>","            <span class=\"c\">//alert(xmlHttp.responseText);</span>","            icons <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>xmlHttp<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","            <span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> key <span class=\"k\">in</span> icons<span class=\"k\">)</span> <span class=\"k\">{</span>","                key <span class=\"k\">=</span> key<span class=\"k\">.</span>toLowerCase<span class=\"k\">();</span>","                <span class=\"c\">//(key);</span>","","                filters<span class=\"k\">.</span>push<span class=\"k\">(</span>key<span class=\"k\">);</span>","                <span class=\"c\">//alert(this.filters[0]);</span>","                <span class=\"k\">var</span> type <span class=\"k\">=</span> icons<span class=\"k\">[</span>key<span class=\"k\">];</span>","                <span class=\"k\">var</span> name <span class=\"k\">=</span> type<span class=\"k\">.</span>name<span class=\"k\">;</span>","                <span class=\"k\">var</span> icon <span class=\"k\">=</span> <span class=\"s\">\"image/red/\"</span> <span class=\"k\">+</span> type<span class=\"k\">.</span>icon<span class=\"k\">;</span>","                <span class=\"k\">var</span> div <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'div'</span><span class=\"k\">);</span>","","                <span class=\"k\">if</span> <span class=\"k\">(</span>prefilters <span class=\"k\">&amp;&amp;</span> prefilters<span class=\"k\">.</span>indexOf<span class=\"k\">(</span>key<span class=\"k\">)</span> <span class=\"k\">&lt;</span> <span class=\"s\">0</span><span class=\"k\">)</span> <span class=\"k\">{</span>","                    div<span class=\"k\">.</span>innerHTML <span class=\"k\">=</span> <span class=\"s\">'&lt;div id=\"'</span> <span class=\"k\">+</span> key <span class=\"k\">+</span> <span class=\"s\">'_filter\" title=\"'</span> <span class=\"k\">+</span> name <span class=\"k\">+</span> <span class=\"s\">'\" style=\"width:32px;height:37px;background-image: url('</span> <span class=\"k\">+</span> icon <span class=\"k\">+</span> <span class=\"s\">')\" onclick=\"legend.toggle(this);\"&gt;&lt;img src=\"'</span> <span class=\"k\">+</span> forbidden <span class=\"k\">+</span> <span class=\"s\">'\"&gt;&lt;/div&gt; '</span><span class=\"k\">;</span>","                    _this<span class=\"k\">.</span>remove<span class=\"k\">(</span>key<span class=\"k\">);</span>","                <span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">{</span>","                    div<span class=\"k\">.</span>innerHTML <span class=\"k\">=</span> <span class=\"s\">'&lt;div id=\"'</span> <span class=\"k\">+</span> key <span class=\"k\">+</span> <span class=\"s\">'_filter\" title=\"'</span> <span class=\"k\">+</span> name <span class=\"k\">+</span> <span class=\"s\">'\" style=\"width:32px;height:37px;background-image: url('</span> <span class=\"k\">+</span> icon <span class=\"k\">+</span> <span class=\"s\">')\" onclick=\"legend.toggle(this);\"&gt;&lt;/div&gt; '</span><span class=\"k\">;</span>","                <span class=\"k\">}</span>","                parent<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>div<span class=\"k\">);</span>","            <span class=\"k\">}</span>","        <span class=\"k\">}</span>","    <span class=\"k\">}</span>","    xmlHttp<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"GET\"</span><span class=\"k\">,</span> jsonF<span class=\"k\">,</span> <span class=\"k\">true</span><span class=\"k\">);</span>","    xmlHttp<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"k\">null</span><span class=\"k\">);</span>","<span class=\"k\">}</span>","","<span class=\"k\">function</span> User<span class=\"k\">()</span> <span class=\"k\">{</span>","    <span class=\"k\">var</span> _this <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">;</span>","","<span class=\"k\">}</span>","","","<span class=\"c\">//SINGLETON</span>","<span class=\"k\">var</span> places<span class=\"k\">;</span>","<span class=\"k\">function</span> Places<span class=\"k\">()</span> <span class=\"k\">{</span>","","    <span class=\"c\">//https://developers.google.com/places/training/additional-places-features</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>searchNear <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>obj<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">{</span>","            location<span class=\"k\">:</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>LatLng<span class=\"k\">(</span>lat<span class=\"k\">,</span> lng<span class=\"k\">),</span>","            radius<span class=\"k\">:</span> <span class=\"s\">500</span><span class=\"k\">,</span>","            <span class=\"c\">//types: ['restaurant']</span>","            keyword<span class=\"k\">:</span> obj<span class=\"k\">.</span>value","        <span class=\"k\">}</span><span class=\"k\">;</span>","        <span class=\"c\">//infowindow = new google.maps.InfoWindow();</span>","        <span class=\"k\">var</span> service <span class=\"k\">=</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>places<span class=\"k\">.</span>PlacesService<span class=\"k\">(</span>map<span class=\"k\">);</span>","        service<span class=\"k\">.</span>nearbySearch<span class=\"k\">(</span>request<span class=\"k\">,</span> callback<span class=\"k\">);</span>","    <span class=\"k\">}</span><span class=\"k\">;</span>","","    <span class=\"k\">function</span> callback<span class=\"k\">(</span>results<span class=\"k\">,</span> status<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">if</span> <span class=\"k\">(</span>status <span class=\"k\">==</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>places<span class=\"k\">.</span>PlacesServiceStatus<span class=\"k\">.</span>OK<span class=\"k\">)</span> <span class=\"k\">{</span>","            <span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> i <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> i <span class=\"k\">&lt;</span> results<span class=\"k\">.</span>length<span class=\"k\">;</span> i<span class=\"k\">++)</span> <span class=\"k\">{</span>","                <span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">{</span>","                    reference<span class=\"k\">:</span> results<span class=\"k\">[</span>i<span class=\"k\">].</span>reference","                <span class=\"k\">}</span><span class=\"k\">;</span>","                service <span class=\"k\">=</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>places<span class=\"k\">.</span>PlacesService<span class=\"k\">(</span>map<span class=\"k\">);</span>","                service<span class=\"k\">.</span>getDetails<span class=\"k\">(</span>request<span class=\"k\">,</span> callback_detail<span class=\"k\">);</span>","            <span class=\"k\">}</span>","        <span class=\"k\">}</span>","    <span class=\"k\">}</span>","    <span class=\"k\">function</span> callback_detail<span class=\"k\">(</span>place<span class=\"k\">,</span> status<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">if</span> <span class=\"k\">(</span>status <span class=\"k\">==</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>places<span class=\"k\">.</span>PlacesServiceStatus<span class=\"k\">.</span>OK<span class=\"k\">)</span>","            createMarker<span class=\"k\">(</span>place<span class=\"k\">);</span>","    <span class=\"k\">}</span>","","    <span class=\"c\">//https://developers.google.com/places/documentation/search#PlaceSearchRequests </span>","    <span class=\"c\">//https://developers.google.com/maps/documentation/javascript/examples/place-search-pagination  </span>","    <span class=\"k\">function</span> createMarker<span class=\"k\">(</span>place<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">var</span> contentString <span class=\"k\">=</span> <span class=\"s\">''</span> <span class=\"k\">+</span>","                <span class=\"s\">'&lt;div id=\"content\" style=\"width:304px;height:176px;\"&gt;'</span> <span class=\"k\">+</span>","                <span class=\"s\">'&lt;div id=\"siteNotice\"&gt;'</span> <span class=\"k\">+</span>","                <span class=\"s\">'&lt;span style=\"font-weight:400\"&gt;'</span> <span class=\"k\">+</span> place<span class=\"k\">.</span>name <span class=\"k\">+</span> <span class=\"s\">'&lt;/span&gt;'</span> <span class=\"k\">+</span>","                <span class=\"s\">'&lt;/div&gt;'</span> <span class=\"k\">+</span>","                <span class=\"s\">'&lt;div id=\"bodyContent\" style=\"float:left;border:0px solid blue;height:100px;\"&gt;'</span> <span class=\"k\">+</span>","                <span class=\"s\">'&lt;span&gt;'</span> <span class=\"k\">+</span> place<span class=\"k\">.</span>formatted_address <span class=\"k\">+</span> <span class=\"s\">'&lt;br/&gt;&lt;br/&gt;'</span> <span class=\"k\">+</span>","                <span class=\"s\">''</span> <span class=\"k\">+</span> <span class=\"k\">(</span>place<span class=\"k\">.</span>website <span class=\"k\">==</span> <span class=\"k\">null</span> <span class=\"k\">?</span> <span class=\"s\">''</span> <span class=\"k\">:</span> <span class=\"s\">'&lt;a href=\"'</span> <span class=\"k\">+</span> place<span class=\"k\">.</span>website <span class=\"k\">+</span> <span class=\"s\">'\" target=\"_blank\"&gt;'</span> <span class=\"k\">+</span> place<span class=\"k\">.</span>website <span class=\"k\">+</span> <span class=\"s\">'&lt;/a&gt;'</span><span class=\"k\">)</span> <span class=\"k\">+</span> <span class=\"s\">'&lt;br/&gt;'</span> <span class=\"k\">+</span>","                <span class=\"s\">''</span> <span class=\"k\">+</span> <span class=\"k\">(</span>place<span class=\"k\">.</span>formatted_phone_number <span class=\"k\">==</span> <span class=\"k\">null</span> <span class=\"k\">?</span> <span class=\"s\">''</span> <span class=\"k\">:</span> place<span class=\"k\">.</span>formatted_phone_number<span class=\"k\">)</span> <span class=\"k\">+</span> <span class=\"s\">'&lt;br/&gt;'</span> <span class=\"k\">+</span>","                <span class=\"s\">''</span> <span class=\"k\">+</span> <span class=\"k\">(</span>place<span class=\"k\">.</span>rating <span class=\"k\">==</span> <span class=\"k\">null</span> <span class=\"k\">?</span> <span class=\"s\">''</span> <span class=\"k\">:</span> <span class=\"s\">'Rating: '</span> <span class=\"k\">+</span> place<span class=\"k\">.</span>rating<span class=\"k\">)</span> <span class=\"k\">+</span> <span class=\"s\">'&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;'</span> <span class=\"k\">+</span>","                <span class=\"s\">'&lt;a href=\"'</span> <span class=\"k\">+</span> <span class=\"k\">(</span>place<span class=\"k\">.</span>url <span class=\"k\">==</span> <span class=\"k\">null</span> <span class=\"k\">?</span> <span class=\"s\">''</span> <span class=\"k\">:</span> place<span class=\"k\">.</span>url<span class=\"k\">)</span> <span class=\"k\">+</span> <span class=\"s\">'\" target=\"_blank\"&gt;More Info&lt;/a&gt;'</span> <span class=\"k\">+</span>","                <span class=\"s\">'&lt;/div&gt;'</span> <span class=\"k\">+</span>","                <span class=\"s\">'&lt;/div&gt;'</span><span class=\"k\">;</span>","","        <span class=\"k\">var</span> image <span class=\"k\">=</span> <span class=\"k\">{</span>","            url<span class=\"k\">:</span> place<span class=\"k\">.</span>icon<span class=\"k\">,</span>","            size<span class=\"k\">:</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>Size<span class=\"k\">(</span><span class=\"s\">71</span><span class=\"k\">,</span> <span class=\"s\">71</span><span class=\"k\">),</span>","            origin<span class=\"k\">:</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>Point<span class=\"k\">(</span><span class=\"s\">0</span><span class=\"k\">,</span> <span class=\"s\">0</span><span class=\"k\">),</span>","            anchor<span class=\"k\">:</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>Point<span class=\"k\">(</span><span class=\"s\">17</span><span class=\"k\">,</span> <span class=\"s\">34</span><span class=\"k\">),</span>","            scaledSize<span class=\"k\">:</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>Size<span class=\"k\">(</span><span class=\"s\">25</span><span class=\"k\">,</span> <span class=\"s\">25</span><span class=\"k\">)</span>","        <span class=\"k\">}</span><span class=\"k\">;</span>","","        <span class=\"k\">var</span> marker <span class=\"k\">=</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>Marker<span class=\"k\">(</span><span class=\"k\">{</span>","            map<span class=\"k\">:</span> map<span class=\"k\">,</span>","            icon<span class=\"k\">:</span> image<span class=\"k\">,</span>","            position<span class=\"k\">:</span> place<span class=\"k\">.</span>geometry<span class=\"k\">.</span>location","        <span class=\"k\">}</span><span class=\"k\">);</span>","","        google<span class=\"k\">.</span>maps<span class=\"k\">.</span>event<span class=\"k\">.</span>addListener<span class=\"k\">(</span>marker<span class=\"k\">,</span> <span class=\"s\">'click'</span><span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","            Markers<span class=\"k\">.</span>window<span class=\"k\">.</span>setContent<span class=\"k\">(</span>contentString<span class=\"k\">);</span>","            Markers<span class=\"k\">.</span>window<span class=\"k\">.</span>open<span class=\"k\">(</span>map<span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">);</span>","        <span class=\"k\">}</span><span class=\"k\">);</span>","    <span class=\"k\">}</span>","<span class=\"k\">}</span>","","","<span class=\"c\">//SINGLETON</span>","<span class=\"k\">var</span> compass<span class=\"k\">;</span>","<span class=\"k\">function</span> Compass<span class=\"k\">(</span>obj<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">var</span> _this <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">;</span>","    <span class=\"k\">var</span> mymarker<span class=\"k\">;</span>","    <span class=\"k\">var</span> watching <span class=\"k\">=</span> <span class=\"k\">null</span><span class=\"k\">;</span>","    ","    <span class=\"k\">this</span><span class=\"k\">.</span>status <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span><span class=\"k\">{</span>","\t\t<span class=\"k\">return</span> watching<span class=\"k\">!=</span><span class=\"k\">null</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","\t","    ","    <span class=\"k\">var</span> needle_off <span class=\"k\">=</span> <span class=\"s\">'image/arrow_off.png'</span><span class=\"k\">;</span>","    <span class=\"k\">var</span> needle_on <span class=\"k\">=</span> <span class=\"s\">'image/arrow_on.png'</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>htmlObj <span class=\"k\">=</span> obj<span class=\"k\">;</span>","","    <span class=\"k\">this</span><span class=\"k\">.</span>htmlObj<span class=\"k\">.</span>onclick <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","        _this<span class=\"k\">.</span>toggle<span class=\"k\">();</span>","    <span class=\"k\">}</span><span class=\"k\">;</span>","","    <span class=\"c\">/*</span>","<span class=\"c\">     * Great place to test google api code</span>","<span class=\"c\">     * http://code.google.com/apis/ajax/playground/</span>","<span class=\"c\">     */</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>dropPin <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>t<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"c\">//toggle off</span>","        <span class=\"k\">if</span> <span class=\"k\">(!</span>t <span class=\"k\">&amp;&amp;</span> mymarker<span class=\"k\">)</span>","            mymarker<span class=\"k\">.</span>setMap<span class=\"k\">(</span><span class=\"k\">null</span><span class=\"k\">);</span>","        <span class=\"k\">else</span> <span class=\"k\">{</span>","            map<span class=\"k\">.</span>setCenter<span class=\"k\">(</span>mypos<span class=\"k\">);</span>","","            <span class=\"k\">if</span> <span class=\"k\">(</span>mymarker<span class=\"k\">)</span>","                mymarker<span class=\"k\">.</span>setMap<span class=\"k\">(</span><span class=\"k\">null</span><span class=\"k\">);</span>","","            mymarker <span class=\"k\">=</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>Marker<span class=\"k\">(</span><span class=\"k\">{</span>","                position<span class=\"k\">:</span> mypos<span class=\"k\">,</span>","                map<span class=\"k\">:</span> map<span class=\"k\">,</span>","                <span class=\"c\">//animation: google.maps.Animation.BOUNCE,</span>","                icon<span class=\"k\">:</span> <span class=\"s\">'image/red.png'</span><span class=\"k\">,</span>","                title<span class=\"k\">:</span> <span class=\"s\">'You</span><span class=\"t\">\\'</span><span class=\"s\">re Here'</span>","            <span class=\"k\">}</span><span class=\"k\">);</span>","        <span class=\"k\">}</span>","    <span class=\"k\">}</span>","","    <span class=\"c\">/*</span>","<span class=\"c\">     * http://www.w3schools.com/html/html5_geolocation.asp</span>","<span class=\"c\">     */</span>","    <span class=\"k\">var</span> options <span class=\"k\">=</span> <span class=\"k\">{</span>","        enableHighAccuracy<span class=\"k\">:</span> <span class=\"k\">true</span><span class=\"k\">,</span>","        timeout<span class=\"k\">:</span> <span class=\"s\">5000</span><span class=\"k\">,</span>","        maximumAge<span class=\"k\">:</span> <span class=\"s\">0</span>","    <span class=\"k\">}</span><span class=\"k\">;</span>","","    <span class=\"k\">function</span> success<span class=\"k\">(</span>pos<span class=\"k\">)</span> <span class=\"k\">{</span>","        lat <span class=\"k\">=</span> pos<span class=\"k\">.</span>coords<span class=\"k\">.</span>latitude<span class=\"k\">;</span>","        lng <span class=\"k\">=</span> pos<span class=\"k\">.</span>coords<span class=\"k\">.</span>longitude<span class=\"k\">;</span>","        mypos <span class=\"k\">=</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>LatLng<span class=\"k\">(</span>lat<span class=\"k\">,</span> lng<span class=\"k\">);</span>","        _this<span class=\"k\">.</span>dropPin<span class=\"k\">(</span><span class=\"k\">true</span><span class=\"k\">);</span>","    <span class=\"k\">}</span>","","    <span class=\"k\">function</span> error<span class=\"k\">(</span>err<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">var</span> msg<span class=\"k\">;</span>","","        <span class=\"k\">switch</span> <span class=\"k\">(</span>error<span class=\"k\">.</span>code<span class=\"k\">)</span>","        <span class=\"k\">{</span>","            <span class=\"k\">case</span> error<span class=\"k\">.</span>PERMISSION_DENIED<span class=\"k\">:</span>","                msg <span class=\"k\">=</span> <span class=\"s\">\"User denied the request for Geolocation.\"</span>","                <span class=\"k\">break</span><span class=\"k\">;</span>","            <span class=\"k\">case</span> error<span class=\"k\">.</span>POSITION_UNAVAILABLE<span class=\"k\">:</span>","                msg <span class=\"k\">=</span> <span class=\"s\">\"Location information is unavailable.\"</span>","                <span class=\"k\">break</span><span class=\"k\">;</span>","            <span class=\"k\">case</span> error<span class=\"k\">.</span>TIMEOUT<span class=\"k\">:</span>","                msg <span class=\"k\">=</span> <span class=\"s\">\"The request to get user location timed out.\"</span>","                <span class=\"k\">break</span><span class=\"k\">;</span>","            <span class=\"k\">case</span> error<span class=\"k\">.</span>UNKNOWN_ERROR<span class=\"k\">:</span>","                msg <span class=\"k\">=</span> <span class=\"s\">\"An unknown error occurred.\"</span>","                <span class=\"k\">break</span><span class=\"k\">;</span>","        <span class=\"k\">}</span>","        _this<span class=\"k\">.</span>off<span class=\"k\">();</span>","","        <span class=\"c\">//console.warn('ERROR(' + err.code + '): ' + err.message);</span>","        alert<span class=\"k\">(</span><span class=\"s\">\"Geolocation is not supported by your browser at this time.\"</span><span class=\"k\">);</span>","        <span class=\"c\">//alert(msg);</span>","    <span class=\"k\">}</span>","    <span class=\"k\">;</span>","","    <span class=\"k\">this</span><span class=\"k\">.</span>off <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","        _this<span class=\"k\">.</span>htmlObj<span class=\"k\">.</span>style<span class=\"k\">.</span>backgroundImage <span class=\"k\">=</span> <span class=\"s\">'url(</span><span class=\"t\">\\'</span><span class=\"s\">'</span> <span class=\"k\">+</span> needle_off <span class=\"k\">+</span> <span class=\"s\">'</span><span class=\"t\">\\'</span><span class=\"s\">)'</span><span class=\"k\">;</span>","        <span class=\"c\">//disableMovement(false);</span>","        navigator<span class=\"k\">.</span>geolocation<span class=\"k\">.</span>clearWatch<span class=\"k\">(</span>watching<span class=\"k\">);</span>","        watching <span class=\"k\">=</span> <span class=\"k\">null</span><span class=\"k\">;</span>","        _this<span class=\"k\">.</span>dropPin<span class=\"k\">(</span><span class=\"k\">false</span><span class=\"k\">);</span>","    <span class=\"k\">}</span><span class=\"k\">;</span>","","    <span class=\"k\">this</span><span class=\"k\">.</span>toggle <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","        <span class=\"c\">// tracking mode OFF</span>","        <span class=\"k\">if</span> <span class=\"k\">(</span>watching<span class=\"k\">!=</span><span class=\"k\">null</span><span class=\"k\">)</span> <span class=\"k\">{</span>","            _this<span class=\"k\">.</span>htmlObj<span class=\"k\">.</span>style<span class=\"k\">.</span>backgroundImage <span class=\"k\">=</span> <span class=\"s\">'url(</span><span class=\"t\">\\'</span><span class=\"s\">'</span> <span class=\"k\">+</span> needle_off <span class=\"k\">+</span> <span class=\"s\">'</span><span class=\"t\">\\'</span><span class=\"s\">)'</span><span class=\"k\">;</span>","            navigator<span class=\"k\">.</span>geolocation<span class=\"k\">.</span>clearWatch<span class=\"k\">(</span>watching<span class=\"k\">);</span>","            watching <span class=\"k\">=</span> <span class=\"k\">null</span><span class=\"k\">;</span>","            _this<span class=\"k\">.</span>dropPin<span class=\"k\">(</span><span class=\"k\">false</span><span class=\"k\">);</span>","        <span class=\"k\">}</span>","        <span class=\"c\">// tracking mode ON</span>","        <span class=\"k\">else</span> <span class=\"k\">{</span>","            _this<span class=\"k\">.</span>htmlObj<span class=\"k\">.</span>style<span class=\"k\">.</span>backgroundImage <span class=\"k\">=</span> <span class=\"s\">'url(</span><span class=\"t\">\\'</span><span class=\"s\">'</span> <span class=\"k\">+</span> needle_on <span class=\"k\">+</span> <span class=\"s\">'</span><span class=\"t\">\\'</span><span class=\"s\">)'</span><span class=\"k\">;</span>","            watching <span class=\"k\">=</span> navigator<span class=\"k\">.</span>geolocation<span class=\"k\">.</span>watchPosition<span class=\"k\">(</span>success<span class=\"k\">,</span> error<span class=\"k\">,</span> options<span class=\"k\">);</span>","        <span class=\"k\">}</span>","    <span class=\"k\">}</span><span class=\"k\">;</span>","<span class=\"k\">}</span>","","","<span class=\"c\">//STATIC Class(Object) MAP</span>","<span class=\"k\">var</span> Map <span class=\"k\">=</span> <span class=\"k\">{</span>","    <span class=\"c\">//15 = 1/2, 14 = 1, 13 = 2, 12 = 4, 11 = 8, 10 = 16</span>","    <span class=\"c\">//-1 = 1/2, 0 = 1, 1 = 2, 2 = 4, 3 = 8, 4 = 16</span>","    <span class=\"c\">//2^(14-zoom) = radius</span>","    <span class=\"c\">//ln(x^y) = y*ln(x)</span>","    <span class=\"c\">//ln(2^(14-zoom)) = ln(radius) = (14-zoom) * ln(2)</span>","    <span class=\"c\">//ln(radius)/ln(2) -14 = -zoom</span>","    <span class=\"c\">//zoom = 14 - ln(radius)/ln(2)</span>","    <span class=\"c\">//throw  round on there to make sure we get an integer</span>","    <span class=\"c\">//and don't make the g-maps API angry</span>","","    rad2zoom<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>radius<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">return</span> Math<span class=\"k\">.</span>round<span class=\"k\">(</span><span class=\"s\">14</span> <span class=\"k\">-</span> Math<span class=\"k\">.</span>log<span class=\"k\">(</span>radius<span class=\"k\">)</span> <span class=\"k\">/</span> Math<span class=\"k\">.</span>LN2<span class=\"k\">);</span>","    <span class=\"k\">}</span><span class=\"k\">,</span>","    zoom2rad<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>zoom<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">return</span> <span class=\"k\">(</span>Math<span class=\"k\">.</span>pow<span class=\"k\">(</span><span class=\"s\">2</span><span class=\"k\">,</span> <span class=\"k\">(</span><span class=\"s\">14</span> <span class=\"k\">-</span> zoom<span class=\"k\">)));</span>","    <span class=\"k\">}</span><span class=\"k\">,</span>","    <span class=\"c\">/* geocoding</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * https://developers.google.com/maps/documentation/javascript/geocoding?csw=1</span>","<span class=\"c\">\t */</span>","","\t<span class=\"c\">// REVERSE GEOCODING</span>","\t<span class=\"c\">//https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding</span>","\t<span class=\"c\">//maps.google.com/maps/api/geocode/json?latlng=25.705501,-80.359855&amp;components=postal_code&amp;sensor=false</span>","    codeAddress<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>address<span class=\"k\">)</span><span class=\"k\">{</span>","\t\tgeocoder<span class=\"k\">.</span>geocode<span class=\"k\">(</span><span class=\"k\">{</span><span class=\"s\">'address'</span><span class=\"k\">:</span> address<span class=\"k\">}</span><span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">(</span>results<span class=\"k\">,</span> status<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>status <span class=\"k\">==</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>GeocoderStatus<span class=\"k\">.</span>OK<span class=\"k\">)</span> <span class=\"k\">{</span>","","\t\t\t\tmypos <span class=\"k\">=</span> results<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>geometry<span class=\"k\">.</span>location<span class=\"k\">;</span>","\t\t\t\tmap<span class=\"k\">.</span>setCenter<span class=\"k\">(</span>mypos<span class=\"k\">);</span>","\t\t\t\tupdate<span class=\"k\">();</span>","","\t\t\t<span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">{</span>","\t\t\t\talert<span class=\"k\">(</span><span class=\"s\">\"Geocode was not successful for the following reason: \"</span> <span class=\"k\">+</span> status<span class=\"k\">);</span>","\t\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">}</span><span class=\"k\">);</span>","\t<span class=\"k\">}</span>","<span class=\"k\">}</span>","","","","<span class=\"k\">function</span> update<span class=\"k\">()</span> <span class=\"k\">{</span>","   ","\t<span class=\"k\">var</span> xmlHttp <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","","\txmlHttp<span class=\"k\">.</span>onreadystatechange <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span>","\t<span class=\"k\">{</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>xmlHttp<span class=\"k\">.</span>readyState <span class=\"k\">==</span> <span class=\"s\">4</span> <span class=\"k\">&amp;&amp;</span> xmlHttp<span class=\"k\">.</span>status <span class=\"k\">==</span> <span class=\"s\">200</span> <span class=\"k\">&amp;&amp;</span> xmlHttp<span class=\"k\">.</span>responseText<span class=\"k\">)</span>","\t\t<span class=\"k\">{</span>","\t\t\t<span class=\"c\">//if(!xmlHttp.responseText)</span>","\t\t\t<span class=\"c\">//\treturn;</span>","","\t\t\t<span class=\"k\">var</span> tweets <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>xmlHttp<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t\t","\t\t\t<span class=\"k\">if</span><span class=\"k\">(</span>tweets<span class=\"k\">.</span>t<span class=\"k\">!=</span><span class=\"k\">null</span><span class=\"k\">)</span>","\t\t\t\tLOG<span class=\"k\">&amp;&amp;</span>console<span class=\"k\">.</span>log<span class=\"k\">(</span><span class=\"s\">\"Results: \"</span><span class=\"k\">+</span>tweets<span class=\"k\">.</span>t<span class=\"k\">.</span>length<span class=\"k\">);</span>","","\t\t\t<span class=\"c\">//alert(tweets.t.length);</span>","","\t\t\t<span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> i <span class=\"k\">in</span> tweets<span class=\"k\">.</span>t<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t\t","\t\t\t\t<span class=\"c\">//alert(i);</span>","\t\t\t\t<span class=\"k\">var</span> filter <span class=\"k\">=</span> tweets<span class=\"k\">.</span>f<span class=\"k\">[</span>i<span class=\"k\">];</span>","\t\t\t\t<span class=\"k\">var</span> tweet <span class=\"k\">=</span> tweets<span class=\"k\">.</span>t<span class=\"k\">[</span>i<span class=\"k\">];</span>","\t\t\t\t<span class=\"k\">var</span> rank <span class=\"k\">=</span> tweets<span class=\"k\">.</span>r<span class=\"k\">[</span>i<span class=\"k\">];</span>","","\t\t\t\t<span class=\"k\">var</span> user <span class=\"k\">=</span> tweet<span class=\"k\">.</span>user<span class=\"k\">.</span>screen_name<span class=\"k\">;</span>","\t\t\t\t<span class=\"k\">var</span> pic <span class=\"k\">=</span> tweet<span class=\"k\">.</span>user<span class=\"k\">.</span>profile_image_url<span class=\"k\">;</span>","\t\t\t\t<span class=\"k\">var</span> text <span class=\"k\">=</span> tweet<span class=\"k\">.</span>text<span class=\"k\">;</span>","\t\t\t\t<span class=\"k\">var</span> follow <span class=\"k\">=</span> tweet<span class=\"k\">.</span>user<span class=\"k\">.</span>followers_count<span class=\"k\">;</span>","\t\t\t\t<span class=\"k\">var</span> friends <span class=\"k\">=</span> tweet<span class=\"k\">.</span>user<span class=\"k\">.</span>friends_count<span class=\"k\">;</span>","\t\t\t\t<span class=\"k\">var</span> c <span class=\"k\">=</span> <span class=\"k\">new</span> Date<span class=\"k\">(</span>tweet<span class=\"k\">.</span>created_at<span class=\"k\">);</span>","\t\t\t\t","\t\t\t\t","\t\t\t\t<span class=\"c\">//alert(tweet.created_at);</span>","","\t\t\t\t<span class=\"c\">//need to cleanup by Andres</span>","\t\t\t\t<span class=\"k\">if</span><span class=\"k\">(</span>tweet<span class=\"k\">.</span>created_at<span class=\"k\">.</span>indexOf<span class=\"k\">(</span><span class=\"s\">\"lastUpdated :\"</span><span class=\"k\">)&lt;</span><span class=\"s\">0</span><span class=\"k\">)</span><span class=\"k\">{</span>","\t\t\t\t\t<span class=\"k\">var</span> d<span class=\"k\">=</span>c<span class=\"k\">.</span>toDateString<span class=\"k\">().</span>split<span class=\"k\">(</span><span class=\"s\">\" \"</span><span class=\"k\">);</span>","\t\t\t\t\t<span class=\"k\">var</span> t<span class=\"k\">=</span>c<span class=\"k\">.</span>toLocaleTimeString<span class=\"k\">().</span>split<span class=\"k\">(</span><span class=\"s\">\":\"</span><span class=\"k\">);</span>","\t\t\t\t\t<span class=\"k\">var</span> ampm <span class=\"k\">=</span> c<span class=\"k\">.</span>toLocaleTimeString<span class=\"k\">().</span>split<span class=\"k\">(</span><span class=\"s\">\" \"</span><span class=\"k\">)[</span><span class=\"s\">1</span><span class=\"k\">];</span>","\t\t\t\t\t<span class=\"k\">var</span> created <span class=\"k\">=</span> d<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">]+</span><span class=\"s\">\", \"</span><span class=\"k\">+</span>d<span class=\"k\">[</span><span class=\"s\">1</span><span class=\"k\">]+</span><span class=\"s\">\" \"</span><span class=\"k\">+</span>d<span class=\"k\">[</span><span class=\"s\">2</span><span class=\"k\">]+</span><span class=\"s\">\" \"</span><span class=\"k\">+</span>t<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">]+</span><span class=\"s\">\":\"</span><span class=\"k\">+</span>t<span class=\"k\">[</span><span class=\"s\">1</span><span class=\"k\">]+</span><span class=\"s\">\" \"</span><span class=\"k\">+</span>ampm<span class=\"k\">;</span>","\t\t\t\t<span class=\"k\">}</span>","\t\t\t\t<span class=\"k\">else</span><span class=\"k\">{</span>","\t\t\t\t\t<span class=\"k\">var</span> created<span class=\"k\">=</span><span class=\"s\">\"\"</span><span class=\"k\">;</span>","\t\t\t\t\ttext <span class=\"k\">=</span> text<span class=\"k\">.</span>split<span class=\"k\">(</span><span class=\"s\">\"**\"</span><span class=\"k\">)[</span><span class=\"s\">0</span><span class=\"k\">]+</span>text<span class=\"k\">.</span>split<span class=\"k\">(</span><span class=\"s\">\"**\"</span><span class=\"k\">)[</span><span class=\"s\">1</span><span class=\"k\">]+</span>text<span class=\"k\">.</span>split<span class=\"k\">(</span><span class=\"s\">\"**\"</span><span class=\"k\">)[</span><span class=\"s\">3</span><span class=\"k\">];</span>","","\t\t\t\t<span class=\"k\">}</span>","\t\t\t\t<span class=\"c\">//\"coordinates\": {\"type\": \"Point\", \"coordinates\": [-81.68738214, 27.96855823]}</span>","\t\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>tweet<span class=\"k\">.</span>geo<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t\t\t<span class=\"k\">var</span> x <span class=\"k\">=</span> tweet<span class=\"k\">.</span>geo<span class=\"k\">.</span>coordinates<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">];</span>","\t\t\t\t\t<span class=\"k\">var</span> y <span class=\"k\">=</span> tweet<span class=\"k\">.</span>geo<span class=\"k\">.</span>coordinates<span class=\"k\">[</span><span class=\"s\">1</span><span class=\"k\">];</span>","\t\t\t\t<span class=\"k\">}</span>","\t\t\t\t<span class=\"k\">else</span> <span class=\"k\">{</span>","\t\t\t\t\t<span class=\"c\">//TODO we need to come up with something better here</span>","\t\t\t\t\t<span class=\"k\">var</span> x <span class=\"k\">=</span> <span class=\"s\">25.758102</span><span class=\"k\">;</span>","\t\t\t\t\t<span class=\"k\">var</span> y <span class=\"k\">=</span> <span class=\"k\">-</span><span class=\"s\">80.373633</span><span class=\"k\">;</span>","\t\t\t\t\t<span class=\"c\">//geocode stuff here</span>","\t\t\t\t\t<span class=\"c\">//25.758102, -80.373633 middle of fiu's pond</span>","\t\t\t\t<span class=\"k\">}</span>","","\t\t\t\t<span class=\"k\">var</span> contentString <span class=\"k\">=</span> <span class=\"s\">''</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;div id=\"content\" style=\"width:304px; height:176px;\"&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;div id=\"siteNotice\"&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;div style=\"float:left;border:0px solid blue;\"&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;a href=\"https://twitter.com/'</span> <span class=\"k\">+</span> user <span class=\"k\">+</span> <span class=\"s\">'\" target=\"_blank\" title=\"Visit '</span><span class=\"k\">+</span>user<span class=\"k\">+</span><span class=\"s\">'</span><span class=\"t\">\\'</span><span class=\"s\">s profile\"&gt;&lt;h4 id=\"firstHeading\" class=\"firstHeading\"&gt;'</span> <span class=\"k\">+</span> user <span class=\"k\">+</span> <span class=\"s\">'&lt;/h4&gt;&lt;/a&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;/div&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;div style=\"float:right;border:0px solid red;width=50%;\"&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;p&gt;Followers: '</span> <span class=\"k\">+</span> follow <span class=\"k\">+</span> <span class=\"s\">'&lt;br/&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'Friends: '</span> <span class=\"k\">+</span> friends <span class=\"k\">+</span> <span class=\"s\">'&lt;/p&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;/div&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;/div&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;div id=\"bodyContent\" style=\"float:left;border:0px solid blue;height:100px;\"&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;div style=\"float:left;border:0px solid blue;width:204px;\"&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;p style=\"max-width:200px\"&gt;'</span> <span class=\"k\">+</span> tagAnchors<span class=\"k\">(</span>text<span class=\"k\">)</span> <span class=\"k\">+</span> <span class=\"s\">'&lt;/p&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;/div&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;div style=\"float:right;border:0px solid red;width=100%;height=100%;\"&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;img name=\"userpic\" src=\"'</span> <span class=\"k\">+</span> pic <span class=\"k\">+</span> <span class=\"s\">'\"&gt;&lt;/img&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;/div&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;/div&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;div id=\"options\" style=\"float:left;border:0px solid blue;width:100%;\"&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;div id=\"footer\" style=\"float:right;border:0px solid black;\"&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;p&gt;'</span> <span class=\"k\">+</span> created <span class=\"k\">+</span> <span class=\"s\">'&lt;/p&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;/div&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"c\">//http://stackoverflow.com/questions/12823579/</span>","\t\t\t\t\t\t<span class=\"c\">//Open iOS 6 native map from URL</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;a href=\"http://maps.google.com/maps/?saddr=Current%20Location&amp;daddr='</span> <span class=\"k\">+</span> user <span class=\"k\">+</span> <span class=\"s\">'@'</span> <span class=\"k\">+</span> x <span class=\"k\">+</span> <span class=\"s\">','</span> <span class=\"k\">+</span> y <span class=\"k\">+</span> <span class=\"s\">'\" title=\"Navigate here from current position\" target=\"_blank\"&gt;Go here&lt;/a&gt; | '</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;a href=\"javascript:showSearch(true);\" title=\"Search for places near here\"&gt;Search Nearby&lt;/a&gt; | '</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;a href=\"javascript:vote('</span><span class=\"k\">+</span>x<span class=\"k\">+</span><span class=\"s\">','</span><span class=\"k\">+</span>y<span class=\"k\">+</span><span class=\"s\">');\" title=\"Vote up/down this tweet\"&gt;Vote&lt;/a&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;div id=\"detail\" style=\"visibility:hidden;float:left;border:0px solid blue;width:100%;\"&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;form  role=\"search\" onsubmit=\"places.searchNear(this.children[0]);return false;\"&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;input id=\"target\" type=\"text\"&gt;&lt;img src=\"image/x.png\" style=\"margin-left:5px;\" onclick=\"showSearch(false);\"&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t   <span class=\"s\">'&lt;/div&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;/div&gt;'</span> <span class=\"k\">+</span>","\t\t\t\t\t\t<span class=\"s\">'&lt;/div&gt;'</span><span class=\"k\">;</span>","","\t\t\t","\t\t\t\t","\t\t\t\t","\t\t\t\t<span class=\"k\">var</span> image <span class=\"k\">=</span> <span class=\"k\">{</span>","\t\t\t\t\turl<span class=\"k\">:</span> pic<span class=\"k\">,</span>","\t\t\t\t\tsize<span class=\"k\">:</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>Size<span class=\"k\">(</span><span class=\"s\">71</span><span class=\"k\">,</span> <span class=\"s\">71</span><span class=\"k\">),</span>","\t\t\t\t\torigin<span class=\"k\">:</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>Point<span class=\"k\">(</span><span class=\"s\">0</span><span class=\"k\">,</span> <span class=\"s\">0</span><span class=\"k\">),</span>","\t\t\t\t\tanchor<span class=\"k\">:</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>Point<span class=\"k\">(</span><span class=\"s\">17</span><span class=\"k\">,</span> <span class=\"s\">34</span><span class=\"k\">),</span>","\t\t\t\t\tscaledSize<span class=\"k\">:</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>Size<span class=\"k\">(</span><span class=\"s\">25</span><span class=\"k\">,</span> <span class=\"s\">25</span><span class=\"k\">)</span>","\t\t\t\t<span class=\"k\">}</span><span class=\"k\">;</span>","","","\t\t\t\t<span class=\"k\">var</span> marker <span class=\"k\">=</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>Marker<span class=\"k\">(</span><span class=\"k\">{</span>","\t\t\t\t\tposition<span class=\"k\">:</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>LatLng<span class=\"k\">(</span>x<span class=\"k\">,</span> y<span class=\"k\">),</span>","\t\t\t\t\t<span class=\"c\">//map: map,</span>","\t\t\t\t\ticon<span class=\"k\">:</span> refresh<span class=\"k\">!=</span><span class=\"s\">\"raw.php\"</span><span class=\"k\">?</span><span class=\"s\">\"image/\"</span><span class=\"k\">+</span>color<span class=\"k\">(</span>rank<span class=\"k\">)</span> <span class=\"k\">+</span> legend<span class=\"k\">.</span>getIcons<span class=\"k\">(</span>filter<span class=\"k\">):</span>image<span class=\"k\">,</span>","\t\t\t\t\tanimation<span class=\"k\">:</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>Animation<span class=\"k\">.</span>DROP<span class=\"k\">,</span>","\t\t\t\t\ttitle<span class=\"k\">:</span> text","\t\t\t\t<span class=\"k\">}</span><span class=\"k\">);</span>","\t\t\t\t","\t\t\t","","\t\t\t\t<span class=\"k\">if</span><span class=\"k\">(</span>manager<span class=\"k\">.</span>getMarker<span class=\"k\">(</span>x<span class=\"k\">,</span>y<span class=\"k\">,</span><span class=\"s\">0</span><span class=\"k\">)==</span><span class=\"k\">null</span><span class=\"k\">)</span><span class=\"k\">{</span>","\t\t\t\t\tMarkers<span class=\"k\">.</span>push<span class=\"k\">(</span>marker<span class=\"k\">,</span> filter<span class=\"k\">,</span> contentString<span class=\"k\">);</span>","\t\t\t\t\tmanager<span class=\"k\">.</span>addMarker<span class=\"k\">(</span>marker<span class=\"k\">,</span><span class=\"s\">0</span><span class=\"k\">);</span>","\t\t\t\t\tmanager<span class=\"k\">.</span>refresh<span class=\"k\">();</span>","\t\t\t\t<span class=\"k\">}</span><span class=\"k\">else</span><span class=\"k\">{</span>","\t\t\t\t\t<span class=\"c\">//TODO</span>","\t\t\t\t\t<span class=\"c\">// do something to avoid tweets with same location appearing right ontop of eachother</span>","\t\t\t\t<span class=\"k\">}</span>","\t\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span>","\t<span class=\"c\">//PARAMETERS</span>","\tlat <span class=\"k\">=</span> map<span class=\"k\">.</span>getCenter<span class=\"k\">().</span>lat<span class=\"k\">();</span>","\tlng <span class=\"k\">=</span> map<span class=\"k\">.</span>getCenter<span class=\"k\">().</span>lng<span class=\"k\">();</span>","\tzoom <span class=\"k\">=</span> map<span class=\"k\">.</span>getZoom<span class=\"k\">();</span>","\t<span class=\"c\">//TODO</span>","\t<span class=\"c\">// rad cannot be &lt; 1 if not there wont be resultsd</span>","\trad <span class=\"k\">=</span> Map<span class=\"k\">.</span>zoom2rad<span class=\"k\">(</span>zoom<span class=\"k\">);</span>","","","","\t<span class=\"c\">//var s = \"refresh.php?lat=\" + lat + \"&amp;lng=\" + lng + \"&amp;rad=\" + rad + \"&amp;olat=\" + olat + \"&amp;olng=\" + olng + \"&amp;orad=\" + orad + \"&amp;filter=\" + legend.getFilters();</span>","\t<span class=\"k\">var</span> s <span class=\"k\">=</span> refresh<span class=\"k\">+</span><span class=\"s\">\"?lat=\"</span> <span class=\"k\">+</span> lat <span class=\"k\">+</span> <span class=\"s\">\"&amp;lng=\"</span> <span class=\"k\">+</span> lng <span class=\"k\">+</span> <span class=\"s\">\"&amp;rad=\"</span> <span class=\"k\">+</span> rad <span class=\"k\">+</span> <span class=\"s\">\"&amp;filter=\"</span> <span class=\"k\">+</span> legend<span class=\"k\">.</span>getFilters<span class=\"k\">();</span>","\tLOG<span class=\"k\">&amp;&amp;</span>console<span class=\"k\">.</span>log<span class=\"k\">(</span><span class=\"s\">\"Request: \"</span><span class=\"k\">+</span>s<span class=\"k\">);</span>","","\t<span class=\"c\">//need to take these out because if NEW tweets are in the result they will be ommited</span>","\t<span class=\"c\">//olat = lat;</span>","\t<span class=\"c\">//olng = lng;</span>","\t<span class=\"c\">//orad = Map.zoom2rad(zoom);</span>","","\txmlHttp<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"GET\"</span><span class=\"k\">,</span> s<span class=\"k\">,</span> <span class=\"k\">true</span><span class=\"k\">);</span>","\txmlHttp<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"k\">null</span><span class=\"k\">);</span>","<span class=\"k\">}</span>","","","<span class=\"c\">// good regex info</span>","<span class=\"c\">// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp?redirectlocale=en-US&amp;redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FRegExp</span>","<span class=\"c\">// https://support.google.com/a/answer/1371417?hl=en</span>","<span class=\"c\">// http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/</span>","","<span class=\"k\">function</span> tagAnchors<span class=\"k\">(</span>s<span class=\"k\">)</span> <span class=\"k\">{</span>","<span class=\"k\">var</span> p <span class=\"k\">=</span> <span class=\"s\">/https?:[^( |,|&#226;&#128;&#157;|&#226;&#128;&#156;|\")]*/g</span><span class=\"k\">;</span>","","\t<span class=\"k\">if</span> <span class=\"k\">(</span>p<span class=\"k\">.</span>test<span class=\"k\">(</span>s<span class=\"k\">))</span><span class=\"k\">{</span>","\t\ts <span class=\"k\">=</span> s<span class=\"k\">.</span>replace<span class=\"k\">(</span>p<span class=\"k\">,</span><span class=\"s\">\"&lt;a href=$&amp; target='_blank'&gt;$&amp;&lt;/a&gt;\"</span><span class=\"k\">);</span>","\t<span class=\"k\">}</span>","\t","\t<span class=\"k\">return</span> s","<span class=\"k\">}</span>","","<span class=\"k\">function</span> vote<span class=\"k\">(</span>x<span class=\"k\">,</span>y<span class=\"k\">)</span><span class=\"k\">{</span>","\t<span class=\"c\">//alert(manager.getMarker(x,y,0)==null);</span>","\t","\t<span class=\"k\">var</span> m <span class=\"k\">=</span> manager<span class=\"k\">.</span>getMarker<span class=\"k\">(</span>x<span class=\"k\">,</span>y<span class=\"k\">,</span><span class=\"s\">0</span><span class=\"k\">);</span>","\tm<span class=\"k\">.</span>setMap<span class=\"k\">(</span><span class=\"k\">null</span><span class=\"k\">);</span>","\tmanager<span class=\"k\">.</span>removeMarker<span class=\"k\">(</span>m<span class=\"k\">);</span>","\tmanager<span class=\"k\">.</span>refresh<span class=\"k\">();</span>","","<span class=\"k\">}</span>","<span class=\"c\">/*</span>","<span class=\"c\">function vote(ballot,id) {</span>","<span class=\"c\">   </span>","<span class=\"c\">\tvar xmlHttp = new XMLHttpRequest();</span>","","<span class=\"c\">\txmlHttp.onreadystatechange = function()</span>","<span class=\"c\">\t{</span>","<span class=\"c\">\t\tif (xmlHttp.readyState == 4 &amp;&amp; xmlHttp.status == 200 &amp;&amp; xmlHttp.responseText)</span>","<span class=\"c\">\t\t{</span>","<span class=\"c\">\t\t\talert(\"vote placed\");</span>","<span class=\"c\">\t</span>","<span class=\"c\">\t\t}</span>","<span class=\"c\">\t}</span>","","<span class=\"c\">\t//var s = \"refresh.php?lat=\" + lat + \"&amp;lng=\" + lng + \"&amp;rad=\" + rad + \"&amp;olat=\" + olat + \"&amp;olng=\" + olng + \"&amp;orad=\" + orad + \"&amp;filter=\" + legend.getFilters();</span>","<span class=\"c\">\tvar s = \"vote.php?t=\"+id;</span>","<span class=\"c\">\tLOG&amp;&amp;console.log(\"Request: \"+s);</span>","","","<span class=\"c\">\txmlHttp.open(\"GET\", s, true);</span>","<span class=\"c\">\txmlHttp.send(null);</span>","<span class=\"c\">}</span>","<span class=\"c\">*/</span>","<span class=\"c\">//used by info bubbles for search nearby</span>","<span class=\"k\">function</span> showSearch<span class=\"k\">(</span>t<span class=\"k\">)</span> <span class=\"k\">{</span>","    document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">'detail'</span><span class=\"k\">).</span>style<span class=\"k\">.</span>visibility <span class=\"k\">=</span> <span class=\"k\">(</span>t<span class=\"k\">==</span><span class=\"k\">true</span><span class=\"k\">)?</span><span class=\"s\">''</span><span class=\"k\">:</span><span class=\"s\">'hidden'</span><span class=\"k\">;</span>","<span class=\"k\">}</span>","","","","","<span class=\"c\">//https://developers.google.com/maps/documentation/javascript/reference#Map</span>","","","","","<span class=\"k\">function</span> initialize<span class=\"k\">()</span> <span class=\"k\">{</span>","","\t<span class=\"c\">// OBJECT INITIALIZATIONS</span>","\t","    compass <span class=\"k\">=</span> <span class=\"k\">new</span> Compass<span class=\"k\">(</span>document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">'compass'</span><span class=\"k\">));</span>","    places <span class=\"k\">=</span> <span class=\"k\">new</span> Places<span class=\"k\">();</span>","    geocoder <span class=\"k\">=</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>Geocoder<span class=\"k\">();</span>","    legend <span class=\"k\">=</span> <span class=\"k\">new</span> Legend<span class=\"k\">(</span>document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">'legend'</span><span class=\"k\">));</span>","","\t<span class=\"c\">// URL PARAMETERS</span>","","    <span class=\"k\">if</span> <span class=\"k\">(</span>location<span class=\"k\">.</span>search<span class=\"k\">.</span>indexOf<span class=\"k\">(</span><span class=\"s\">'raw='</span><span class=\"k\">)</span> <span class=\"k\">&gt;</span> <span class=\"k\">-</span><span class=\"s\">1</span><span class=\"k\">)</span>","        refresh <span class=\"k\">=</span> location<span class=\"k\">.</span>search<span class=\"k\">.</span>split<span class=\"k\">(</span><span class=\"s\">'raw='</span><span class=\"k\">)[</span><span class=\"s\">1</span><span class=\"k\">].</span>split<span class=\"k\">(</span><span class=\"s\">'&amp;'</span><span class=\"k\">)[</span><span class=\"s\">0</span><span class=\"k\">]==</span><span class=\"s\">'true'</span><span class=\"k\">?</span><span class=\"s\">'raw.php'</span><span class=\"k\">:</span>refresh<span class=\"k\">;</span>\t<span class=\"c\">//this needs to be a boolean</span>","    <span class=\"k\">if</span> <span class=\"k\">(</span>location<span class=\"k\">.</span>search<span class=\"k\">.</span>indexOf<span class=\"k\">(</span><span class=\"s\">'lat='</span><span class=\"k\">)</span> <span class=\"k\">&gt;</span> <span class=\"k\">-</span><span class=\"s\">1</span><span class=\"k\">)</span>","        lat <span class=\"k\">=</span> location<span class=\"k\">.</span>search<span class=\"k\">.</span>split<span class=\"k\">(</span><span class=\"s\">'lat='</span><span class=\"k\">)[</span><span class=\"s\">1</span><span class=\"k\">].</span>split<span class=\"k\">(</span><span class=\"s\">'&amp;'</span><span class=\"k\">)[</span><span class=\"s\">0</span><span class=\"k\">];</span>","    <span class=\"k\">if</span> <span class=\"k\">(</span>location<span class=\"k\">.</span>search<span class=\"k\">.</span>indexOf<span class=\"k\">(</span><span class=\"s\">'lng='</span><span class=\"k\">)</span> <span class=\"k\">&gt;</span> <span class=\"k\">-</span><span class=\"s\">1</span><span class=\"k\">)</span>","        lng <span class=\"k\">=</span> location<span class=\"k\">.</span>search<span class=\"k\">.</span>split<span class=\"k\">(</span><span class=\"s\">'lng='</span><span class=\"k\">)[</span><span class=\"s\">1</span><span class=\"k\">].</span>split<span class=\"k\">(</span><span class=\"s\">'&amp;'</span><span class=\"k\">)[</span><span class=\"s\">0</span><span class=\"k\">];</span>","    <span class=\"k\">if</span> <span class=\"k\">(</span>location<span class=\"k\">.</span>search<span class=\"k\">.</span>indexOf<span class=\"k\">(</span><span class=\"s\">'filter='</span><span class=\"k\">)</span> <span class=\"k\">&gt;</span> <span class=\"k\">-</span><span class=\"s\">1</span><span class=\"k\">)</span>","        legend<span class=\"k\">.</span>setPreFilters<span class=\"k\">(</span>location<span class=\"k\">.</span>search<span class=\"k\">.</span>split<span class=\"k\">(</span><span class=\"s\">'filter='</span><span class=\"k\">)[</span><span class=\"s\">1</span><span class=\"k\">].</span>split<span class=\"k\">(</span><span class=\"s\">'&amp;'</span><span class=\"k\">)[</span><span class=\"s\">0</span><span class=\"k\">]);</span>","\t<span class=\"k\">if</span> <span class=\"k\">(</span>location<span class=\"k\">.</span>search<span class=\"k\">.</span>indexOf<span class=\"k\">(</span><span class=\"s\">'zoom='</span><span class=\"k\">)</span> <span class=\"k\">&gt;</span> <span class=\"k\">-</span><span class=\"s\">1</span><span class=\"k\">)</span>","        zoom <span class=\"k\">=</span> parseInt<span class=\"k\">(</span>location<span class=\"k\">.</span>search<span class=\"k\">.</span>split<span class=\"k\">(</span><span class=\"s\">'zoom='</span><span class=\"k\">)[</span><span class=\"s\">1</span><span class=\"k\">].</span>split<span class=\"k\">(</span><span class=\"s\">'&amp;'</span><span class=\"k\">)[</span><span class=\"s\">0</span><span class=\"k\">]);</span>\t\t\t\t\t<span class=\"c\">//this needs to be a number</span>","\t<span class=\"k\">if</span> <span class=\"k\">(</span>location<span class=\"k\">.</span>search<span class=\"k\">.</span>indexOf<span class=\"k\">(</span><span class=\"s\">'live='</span><span class=\"k\">)</span> <span class=\"k\">&gt;</span> <span class=\"k\">-</span><span class=\"s\">1</span><span class=\"k\">)</span>","        live <span class=\"k\">=</span> location<span class=\"k\">.</span>search<span class=\"k\">.</span>split<span class=\"k\">(</span><span class=\"s\">'live='</span><span class=\"k\">)[</span><span class=\"s\">1</span><span class=\"k\">].</span>split<span class=\"k\">(</span><span class=\"s\">'&amp;'</span><span class=\"k\">)[</span><span class=\"s\">0</span><span class=\"k\">]==</span><span class=\"s\">'true'</span><span class=\"k\">;</span>\t\t\t\t\t\t<span class=\"c\">//this needs to be a boolean</span>","\t<span class=\"k\">if</span> <span class=\"k\">(</span>location<span class=\"k\">.</span>search<span class=\"k\">.</span>indexOf<span class=\"k\">(</span><span class=\"s\">'log='</span><span class=\"k\">)</span> <span class=\"k\">&gt;</span> <span class=\"k\">-</span><span class=\"s\">1</span><span class=\"k\">)</span>","        LOG <span class=\"k\">=</span> location<span class=\"k\">.</span>search<span class=\"k\">.</span>split<span class=\"k\">(</span><span class=\"s\">'log='</span><span class=\"k\">)[</span><span class=\"s\">1</span><span class=\"k\">].</span>split<span class=\"k\">(</span><span class=\"s\">'&amp;'</span><span class=\"k\">)[</span><span class=\"s\">0</span><span class=\"k\">]==</span><span class=\"s\">'true'</span><span class=\"k\">;</span>\t\t\t\t\t<span class=\"c\">//this needs to be a boolean</span>","","","","","    <span class=\"k\">var</span> mapOptions <span class=\"k\">=</span> <span class=\"k\">{</span>","        zoom<span class=\"k\">:</span> zoom<span class=\"k\">,</span>","        center<span class=\"k\">:</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>LatLng<span class=\"k\">(</span>lat<span class=\"k\">,</span> lng<span class=\"k\">),</span>","        mapTypeId<span class=\"k\">:</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>MapTypeId<span class=\"k\">.</span>ROADMAP<span class=\"k\">,</span>","        <span class=\"c\">//mapTypeId: google.maps.MapTypeId.SATELLITE,</span>","        disableDefaultUI<span class=\"k\">:</span> <span class=\"k\">true</span>","    <span class=\"k\">}</span><span class=\"k\">;</span>","    map <span class=\"k\">=</span> <span class=\"k\">new</span> google<span class=\"k\">.</span>maps<span class=\"k\">.</span>Map<span class=\"k\">(</span>document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">'map-canvas'</span><span class=\"k\">),</span>","            mapOptions<span class=\"k\">);</span>","","    <span class=\"k\">var</span> mgrOptions <span class=\"k\">=</span> <span class=\"k\">{</span>borderPadding<span class=\"k\">:</span> <span class=\"s\">0</span><span class=\"k\">,</span> maxZoom<span class=\"k\">:</span> <span class=\"s\">1</span><span class=\"k\">}</span><span class=\"k\">;</span>","    manager <span class=\"k\">=</span> <span class=\"k\">new</span> MarkerManager<span class=\"k\">(</span>map<span class=\"k\">,</span> mgrOptions<span class=\"k\">);</span>","","","    <span class=\"c\">// EVENT HANDLERS</span>","    ","\t<span class=\"c\">// Do an update every time AFTER the map is moved</span>","    google<span class=\"k\">.</span>maps<span class=\"k\">.</span>event<span class=\"k\">.</span>addListener<span class=\"k\">(</span>map<span class=\"k\">,</span> <span class=\"s\">\"tilesloaded\"</span><span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span> ","\t\tupdate<span class=\"k\">();</span>","\t\tgarbagecollect<span class=\"k\">();</span>","\t<span class=\"k\">}</span><span class=\"k\">);</span>"," ","\t","\t<span class=\"c\">// Clear all windows BEFORE the map is changed</span>","    google<span class=\"k\">.</span>maps<span class=\"k\">.</span>event<span class=\"k\">.</span>addListener<span class=\"k\">(</span>map<span class=\"k\">,</span> <span class=\"s\">\"zoom_changed\"</span><span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span> ","\t\tMarkers<span class=\"k\">.</span>closeAll<span class=\"k\">();</span>","\t<span class=\"k\">}</span><span class=\"k\">);</span>","    google<span class=\"k\">.</span>maps<span class=\"k\">.</span>event<span class=\"k\">.</span>addListener<span class=\"k\">(</span>map<span class=\"k\">,</span> <span class=\"s\">\"dragend\"</span><span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span> ","\t\tMarkers<span class=\"k\">.</span>closeAll<span class=\"k\">();</span>","\t\t<span class=\"c\">//compass.off();</span>","\t<span class=\"k\">}</span><span class=\"k\">);</span>    ","\tgoogle<span class=\"k\">.</span>maps<span class=\"k\">.</span>event<span class=\"k\">.</span>addListener<span class=\"k\">(</span>map<span class=\"k\">,</span> <span class=\"s\">'click'</span><span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","        Markers<span class=\"k\">.</span>closeAll<span class=\"k\">();</span>","    <span class=\"k\">}</span><span class=\"k\">);</span>","\t","\t","\t","\t<span class=\"c\">// If map is 'live' update every ...</span>","    live<span class=\"k\">&amp;&amp;</span>setInterval<span class=\"k\">(</span><span class=\"k\">function</span><span class=\"k\">()</span><span class=\"k\">{</span>update<span class=\"k\">();</span>garbagecollect<span class=\"k\">();</span><span class=\"k\">}</span><span class=\"k\">,</span><span class=\"s\">5000</span><span class=\"k\">);</span>","","","\t<span class=\"c\">// MISC</span>","    map<span class=\"k\">.</span>controls<span class=\"k\">[</span>google<span class=\"k\">.</span>maps<span class=\"k\">.</span>ControlPosition<span class=\"k\">.</span>RIGHT_BOTTOM<span class=\"k\">].</span>push<span class=\"k\">(</span>legend<span class=\"k\">.</span>htmlObj<span class=\"k\">);</span>","    map<span class=\"k\">.</span>controls<span class=\"k\">[</span>google<span class=\"k\">.</span>maps<span class=\"k\">.</span>ControlPosition<span class=\"k\">.</span>LEFT_BOTTOM<span class=\"k\">].</span>push<span class=\"k\">(</span>compass<span class=\"k\">.</span>htmlObj<span class=\"k\">);</span>","    ","    ","    <span class=\"k\">return</span> <span class=\"s\">0</span><span class=\"k\">;</span>","<span class=\"k\">}</span>","","<span class=\"k\">function</span> garbagecollect<span class=\"k\">()</span><span class=\"k\">{</span>","\tLOG<span class=\"k\">&amp;&amp;</span>console<span class=\"k\">.</span>log<span class=\"k\">(</span><span class=\"s\">\"GC Before:\"</span><span class=\"k\">+</span>manager<span class=\"k\">.</span>getMarkerCount<span class=\"k\">(</span><span class=\"s\">0</span><span class=\"k\">));</span>","","\t<span class=\"k\">while</span><span class=\"k\">(</span>manager<span class=\"k\">.</span>getMarkerCount<span class=\"k\">(</span><span class=\"s\">0</span><span class=\"k\">)&gt;</span><span class=\"s\">1000</span><span class=\"k\">)</span><span class=\"k\">{</span>","\t\tmanager<span class=\"k\">.</span>removeMarker<span class=\"k\">(</span>Markers<span class=\"k\">.</span>markers<span class=\"k\">.</span>shift<span class=\"k\">());</span>","\t<span class=\"k\">}</span>\t\t","\tLOG<span class=\"k\">&amp;&amp;</span>console<span class=\"k\">.</span>log<span class=\"k\">(</span><span class=\"s\">\"GC After:\"</span><span class=\"k\">+</span>manager<span class=\"k\">.</span>getMarkerCount<span class=\"k\">(</span><span class=\"s\">0</span><span class=\"k\">));</span>","","<span class=\"k\">}</span>","","","<span class=\"c\">// UI EVENTS</span>","google<span class=\"k\">.</span>maps<span class=\"k\">.</span>event<span class=\"k\">.</span>addDomListener<span class=\"k\">(</span>window<span class=\"k\">,</span> <span class=\"s\">'load'</span><span class=\"k\">,</span> initialize<span class=\"k\">);</span>"];
_$jscoverage['js/userinterface.js'][2]++;
var geocoder;
_$jscoverage['js/userinterface.js'][3]++;
var map;
_$jscoverage['js/userinterface.js'][4]++;
var manager;
_$jscoverage['js/userinterface.js'][7]++;
var lat = 25.759060000000002, lng = -80.37388, zoom = 14, rad = 1;
_$jscoverage['js/userinterface.js'][8]++;
var refresh = "refresh.php";
_$jscoverage['js/userinterface.js'][10]++;
var jsonF = "json/filters.json";
_$jscoverage['js/userinterface.js'][12]++;
var mypos;
_$jscoverage['js/userinterface.js'][13]++;
var LOG = false;
_$jscoverage['js/userinterface.js'][14]++;
var live = false;
_$jscoverage['js/userinterface.js'][16]++;
function color(n) {
  _$jscoverage['js/userinterface.js'][17]++;
  switch (true) {
  case (n == 666):
    _$jscoverage['js/userinterface.js'][20]++;
    return "";
    _$jscoverage['js/userinterface.js'][21]++;
    break;
  case (n > 6):
    _$jscoverage['js/userinterface.js'][23]++;
    return "red/";
    _$jscoverage['js/userinterface.js'][24]++;
    break;
  case ((n > 4) && (n < 7)):
    _$jscoverage['js/userinterface.js'][26]++;
    return "orange/";
    _$jscoverage['js/userinterface.js'][27]++;
    break;
  case (n < 5):
    _$jscoverage['js/userinterface.js'][29]++;
    return "green/";
    _$jscoverage['js/userinterface.js'][30]++;
    break;
  default:
    _$jscoverage['js/userinterface.js'][32]++;
    return "";
  }
}
_$jscoverage['js/userinterface.js'][38]++;
var Markers = {markers: [], markerst: [], window: null, closeAll: (function () {
  _$jscoverage['js/userinterface.js'][43]++;
  if (Markers.window) {
    _$jscoverage['js/userinterface.js'][44]++;
    Markers.window.close();
  }
}), toggle: (function (category, t) {
  _$jscoverage['js/userinterface.js'][47]++;
  if (this.window) {
    _$jscoverage['js/userinterface.js'][48]++;
    this.window.close();
  }
  _$jscoverage['js/userinterface.js'][50]++;
  for (var i = 0; (i < this.markers.length); (i++)) {
    _$jscoverage['js/userinterface.js'][51]++;
    if ((this.markerst[i] == category)) {
      _$jscoverage['js/userinterface.js'][52]++;
      this.markers[i].setVisible(t);
    }
}
}), push: (function (m, f, c) {
  _$jscoverage['js/userinterface.js'][55]++;
  this.markers.push(m);
  _$jscoverage['js/userinterface.js'][56]++;
  this.markerst.push(f);
  _$jscoverage['js/userinterface.js'][59]++;
  google.maps.event.addListener(m, "click", (function () {
  _$jscoverage['js/userinterface.js'][62]++;
  if (Markers.window) {
    _$jscoverage['js/userinterface.js'][63]++;
    Markers.window.close();
  }
  _$jscoverage['js/userinterface.js'][65]++;
  Markers.window = new (google.maps.InfoWindow)({content: c, arrowStyle: 2, arrowSize: 10, ShadowStyle: 1});
  _$jscoverage['js/userinterface.js'][72]++;
  Markers.window.open(map, m);
}));
})};
_$jscoverage['js/userinterface.js'][78]++;
var legend;
_$jscoverage['js/userinterface.js'][79]++;
function Legend(parent) {
  _$jscoverage['js/userinterface.js'][80]++;
  var _this = this;
  _$jscoverage['js/userinterface.js'][81]++;
  var forbidden = "image/forbidden.png";
  _$jscoverage['js/userinterface.js'][83]++;
  var filters = [];
  _$jscoverage['js/userinterface.js'][84]++;
  var prefilters;
  _$jscoverage['js/userinterface.js'][85]++;
  var icons;
  _$jscoverage['js/userinterface.js'][86]++;
  var collapsed = false;
  _$jscoverage['js/userinterface.js'][88]++;
  this.isCollapsed = (function () {
  _$jscoverage['js/userinterface.js'][88]++;
  return collapsed;
});
  _$jscoverage['js/userinterface.js'][89]++;
  this.setCollapsed = (function (v) {
  _$jscoverage['js/userinterface.js'][91]++;
  if (v) {
    _$jscoverage['js/userinterface.js'][92]++;
    _this.htmlObj.style.height = "20px";
  }
  else {
    _$jscoverage['js/userinterface.js'][94]++;
    _this.htmlObj.style.height = "";
  }
  _$jscoverage['js/userinterface.js'][96]++;
  collapsed = v;
});
  _$jscoverage['js/userinterface.js'][99]++;
  this.htmlObj = parent;
  _$jscoverage['js/userinterface.js'][101]++;
  this.add = (function (item) {
  _$jscoverage['js/userinterface.js'][102]++;
  filters.push(item);
});
  _$jscoverage['js/userinterface.js'][105]++;
  this.remove = (function (item) {
  _$jscoverage['js/userinterface.js'][106]++;
  filters.splice(filters.indexOf(item), 1);
});
  _$jscoverage['js/userinterface.js'][109]++;
  this.getFilters = (function () {
  _$jscoverage['js/userinterface.js'][110]++;
  return filters;
});
  _$jscoverage['js/userinterface.js'][112]++;
  this.getIcons = (function (key) {
  _$jscoverage['js/userinterface.js'][113]++;
  if ((key == "raw")) {
    _$jscoverage['js/userinterface.js'][114]++;
    return "letter_t.png";
  }
  else {
    _$jscoverage['js/userinterface.js'][116]++;
    return icons[key].icon;
  }
});
  _$jscoverage['js/userinterface.js'][118]++;
  this.setPreFilters = (function (f) {
  _$jscoverage['js/userinterface.js'][119]++;
  prefilters = f.split(",");
});
  _$jscoverage['js/userinterface.js'][122]++;
  this.toggle = (function (obj) {
  _$jscoverage['js/userinterface.js'][123]++;
  var name = obj.id.toLowerCase().split("_")[0];
  _$jscoverage['js/userinterface.js'][124]++;
  if ((obj.innerHTML == "")) {
    _$jscoverage['js/userinterface.js'][125]++;
    obj.innerHTML = ("<img src=\"" + forbidden + "\">");
    _$jscoverage['js/userinterface.js'][126]++;
    this.remove(name);
    _$jscoverage['js/userinterface.js'][128]++;
    Markers.toggle(name, false);
  }
  else {
    _$jscoverage['js/userinterface.js'][131]++;
    obj.innerHTML = "";
    _$jscoverage['js/userinterface.js'][132]++;
    this.add(name);
    _$jscoverage['js/userinterface.js'][133]++;
    Markers.toggle(name, true);
  }
});
  _$jscoverage['js/userinterface.js'][140]++;
  var lTitle = document.createElement("div");
  _$jscoverage['js/userinterface.js'][141]++;
  lTitle.innerHTML = "Legend";
  _$jscoverage['js/userinterface.js'][142]++;
  parent.appendChild(lTitle);
  _$jscoverage['js/userinterface.js'][144]++;
  lTitle.onclick = (function () {
  _$jscoverage['js/userinterface.js'][146]++;
  if ((! _this.isCollapsed())) {
    _$jscoverage['js/userinterface.js'][147]++;
    _this.setCollapsed(true);
  }
  else {
    _$jscoverage['js/userinterface.js'][149]++;
    _this.setCollapsed(false);
  }
});
  _$jscoverage['js/userinterface.js'][153]++;
  var xmlHttp = new XMLHttpRequest();
  _$jscoverage['js/userinterface.js'][154]++;
  xmlHttp.onreadystatechange = (function (par) {
  _$jscoverage['js/userinterface.js'][155]++;
  if (((xmlHttp.readyState == 4) && (xmlHttp.status == 200))) {
    _$jscoverage['js/userinterface.js'][158]++;
    icons = JSON.parse(xmlHttp.responseText);
    _$jscoverage['js/userinterface.js'][159]++;
    for (var key in icons) {
      _$jscoverage['js/userinterface.js'][160]++;
      key = key.toLowerCase();
      _$jscoverage['js/userinterface.js'][163]++;
      filters.push(key);
      _$jscoverage['js/userinterface.js'][165]++;
      var type = icons[key];
      _$jscoverage['js/userinterface.js'][166]++;
      var name = type.name;
      _$jscoverage['js/userinterface.js'][167]++;
      var icon = ("image/red/" + type.icon);
      _$jscoverage['js/userinterface.js'][168]++;
      var div = document.createElement("div");
      _$jscoverage['js/userinterface.js'][170]++;
      if ((prefilters && (prefilters.indexOf(key) < 0))) {
        _$jscoverage['js/userinterface.js'][171]++;
        div.innerHTML = ("<div id=\"" + key + "_filter\" title=\"" + name + "\" style=\"width:32px;height:37px;background-image: url(" + icon + ")\" onclick=\"legend.toggle(this);\"><img src=\"" + forbidden + "\"></div> ");
        _$jscoverage['js/userinterface.js'][172]++;
        _this.remove(key);
      }
      else {
        _$jscoverage['js/userinterface.js'][174]++;
        div.innerHTML = ("<div id=\"" + key + "_filter\" title=\"" + name + "\" style=\"width:32px;height:37px;background-image: url(" + icon + ")\" onclick=\"legend.toggle(this);\"></div> ");
      }
      _$jscoverage['js/userinterface.js'][176]++;
      parent.appendChild(div);
}
  }
});
  _$jscoverage['js/userinterface.js'][180]++;
  xmlHttp.open("GET", jsonF, true);
  _$jscoverage['js/userinterface.js'][181]++;
  xmlHttp.send(null);
}
_$jscoverage['js/userinterface.js'][184]++;
function User() {
  _$jscoverage['js/userinterface.js'][185]++;
  var _this = this;
}
_$jscoverage['js/userinterface.js'][191]++;
var places;
_$jscoverage['js/userinterface.js'][192]++;
function Places() {
  _$jscoverage['js/userinterface.js'][195]++;
  this.searchNear = (function (obj) {
  _$jscoverage['js/userinterface.js'][196]++;
  var request = {location: new (google.maps.LatLng)(lat, lng), radius: 500, keyword: obj.value};
  _$jscoverage['js/userinterface.js'][203]++;
  var service = new (google.maps.places.PlacesService)(map);
  _$jscoverage['js/userinterface.js'][204]++;
  service.nearbySearch(request, callback);
});
  _$jscoverage['js/userinterface.js'][207]++;
  function callback(results, status) {
    _$jscoverage['js/userinterface.js'][208]++;
    if ((status == google.maps.places.PlacesServiceStatus.OK)) {
      _$jscoverage['js/userinterface.js'][209]++;
      for (var i = 0; (i < results.length); (i++)) {
        _$jscoverage['js/userinterface.js'][210]++;
        var request = {reference: results[i].reference};
        _$jscoverage['js/userinterface.js'][213]++;
        service = new (google.maps.places.PlacesService)(map);
        _$jscoverage['js/userinterface.js'][214]++;
        service.getDetails(request, callback_detail);
}
    }
}
  _$jscoverage['js/userinterface.js'][218]++;
  function callback_detail(place, status) {
    _$jscoverage['js/userinterface.js'][219]++;
    if ((status == google.maps.places.PlacesServiceStatus.OK)) {
      _$jscoverage['js/userinterface.js'][220]++;
      createMarker(place);
    }
}
  _$jscoverage['js/userinterface.js'][225]++;
  function createMarker(place) {
    _$jscoverage['js/userinterface.js'][226]++;
    var contentString = ("" + "<div id=\"content\" style=\"width:304px;height:176px;\">" + "<div id=\"siteNotice\">" + "<span style=\"font-weight:400\">" + place.name + "</span>" + "</div>" + "<div id=\"bodyContent\" style=\"float:left;border:0px solid blue;height:100px;\">" + "<span>" + place.formatted_address + "<br/><br/>" + "" + ((place.website == null)? "": ("<a href=\"" + place.website + "\" target=\"_blank\">" + place.website + "</a>")) + "<br/>" + "" + ((place.formatted_phone_number == null)? "": place.formatted_phone_number) + "<br/>" + "" + ((place.rating == null)? "": ("Rating: " + place.rating)) + "</span><br/><br/>" + "<a href=\"" + ((place.url == null)? "": place.url) + "\" target=\"_blank\">More Info</a>" + "</div>" + "</div>");
    _$jscoverage['js/userinterface.js'][240]++;
    var image = {url: place.icon, size: new (google.maps.Size)(71, 71), origin: new (google.maps.Point)(0, 0), anchor: new (google.maps.Point)(17, 34), scaledSize: new (google.maps.Size)(25, 25)};
    _$jscoverage['js/userinterface.js'][248]++;
    var marker = new (google.maps.Marker)({map: map, icon: image, position: place.geometry.location});
    _$jscoverage['js/userinterface.js'][254]++;
    google.maps.event.addListener(marker, "click", (function () {
  _$jscoverage['js/userinterface.js'][255]++;
  Markers.window.setContent(contentString);
  _$jscoverage['js/userinterface.js'][256]++;
  Markers.window.open(map, this);
}));
}
}
_$jscoverage['js/userinterface.js'][263]++;
var compass;
_$jscoverage['js/userinterface.js'][264]++;
function Compass(obj) {
  _$jscoverage['js/userinterface.js'][265]++;
  var _this = this;
  _$jscoverage['js/userinterface.js'][266]++;
  var mymarker;
  _$jscoverage['js/userinterface.js'][267]++;
  var watching = null;
  _$jscoverage['js/userinterface.js'][269]++;
  this.status = (function () {
  _$jscoverage['js/userinterface.js'][270]++;
  return (watching != null);
});
  _$jscoverage['js/userinterface.js'][274]++;
  var needle_off = "image/arrow_off.png";
  _$jscoverage['js/userinterface.js'][275]++;
  var needle_on = "image/arrow_on.png";
  _$jscoverage['js/userinterface.js'][276]++;
  this.htmlObj = obj;
  _$jscoverage['js/userinterface.js'][278]++;
  this.htmlObj.onclick = (function () {
  _$jscoverage['js/userinterface.js'][279]++;
  _this.toggle();
});
  _$jscoverage['js/userinterface.js'][286]++;
  this.dropPin = (function (t) {
  _$jscoverage['js/userinterface.js'][288]++;
  if (((! t) && mymarker)) {
    _$jscoverage['js/userinterface.js'][289]++;
    mymarker.setMap(null);
  }
  else {
    _$jscoverage['js/userinterface.js'][291]++;
    map.setCenter(mypos);
    _$jscoverage['js/userinterface.js'][293]++;
    if (mymarker) {
      _$jscoverage['js/userinterface.js'][294]++;
      mymarker.setMap(null);
    }
    _$jscoverage['js/userinterface.js'][296]++;
    mymarker = new (google.maps.Marker)({position: mypos, map: map, icon: "image/red.png", title: "You're Here"});
  }
});
  _$jscoverage['js/userinterface.js'][309]++;
  var options = {enableHighAccuracy: true, timeout: 5000, maximumAge: 0};
  _$jscoverage['js/userinterface.js'][315]++;
  function success(pos) {
    _$jscoverage['js/userinterface.js'][316]++;
    lat = pos.coords.latitude;
    _$jscoverage['js/userinterface.js'][317]++;
    lng = pos.coords.longitude;
    _$jscoverage['js/userinterface.js'][318]++;
    mypos = new (google.maps.LatLng)(lat, lng);
    _$jscoverage['js/userinterface.js'][319]++;
    _this.dropPin(true);
}
  _$jscoverage['js/userinterface.js'][322]++;
  function error(err) {
    _$jscoverage['js/userinterface.js'][323]++;
    var msg;
    _$jscoverage['js/userinterface.js'][325]++;
    switch (error.code) {
    case error.PERMISSION_DENIED:
      _$jscoverage['js/userinterface.js'][328]++;
      msg = "User denied the request for Geolocation.";
      _$jscoverage['js/userinterface.js'][329]++;
      break;
    case error.POSITION_UNAVAILABLE:
      _$jscoverage['js/userinterface.js'][331]++;
      msg = "Location information is unavailable.";
      _$jscoverage['js/userinterface.js'][332]++;
      break;
    case error.TIMEOUT:
      _$jscoverage['js/userinterface.js'][334]++;
      msg = "The request to get user location timed out.";
      _$jscoverage['js/userinterface.js'][335]++;
      break;
    case error.UNKNOWN_ERROR:
      _$jscoverage['js/userinterface.js'][337]++;
      msg = "An unknown error occurred.";
      _$jscoverage['js/userinterface.js'][338]++;
      break;
    }
    _$jscoverage['js/userinterface.js'][340]++;
    _this.off();
    _$jscoverage['js/userinterface.js'][343]++;
    alert("Geolocation is not supported by your browser at this time.");
}
  _$jscoverage['js/userinterface.js'][346]++;
  ;
  _$jscoverage['js/userinterface.js'][348]++;
  this.off = (function () {
  _$jscoverage['js/userinterface.js'][349]++;
  _this.htmlObj.style.backgroundImage = ("url('" + needle_off + "')");
  _$jscoverage['js/userinterface.js'][351]++;
  navigator.geolocation.clearWatch(watching);
  _$jscoverage['js/userinterface.js'][352]++;
  watching = null;
  _$jscoverage['js/userinterface.js'][353]++;
  _this.dropPin(false);
});
  _$jscoverage['js/userinterface.js'][356]++;
  this.toggle = (function () {
  _$jscoverage['js/userinterface.js'][358]++;
  if ((watching != null)) {
    _$jscoverage['js/userinterface.js'][359]++;
    _this.htmlObj.style.backgroundImage = ("url('" + needle_off + "')");
    _$jscoverage['js/userinterface.js'][360]++;
    navigator.geolocation.clearWatch(watching);
    _$jscoverage['js/userinterface.js'][361]++;
    watching = null;
    _$jscoverage['js/userinterface.js'][362]++;
    _this.dropPin(false);
  }
  else {
    _$jscoverage['js/userinterface.js'][366]++;
    _this.htmlObj.style.backgroundImage = ("url('" + needle_on + "')");
    _$jscoverage['js/userinterface.js'][367]++;
    watching = navigator.geolocation.watchPosition(success, error, options);
  }
});
}
_$jscoverage['js/userinterface.js'][374]++;
var Map = {rad2zoom: (function (radius) {
  _$jscoverage['js/userinterface.js'][386]++;
  return Math.round((14 - (Math.log(radius) / Math.LN2)));
}), zoom2rad: (function (zoom) {
  _$jscoverage['js/userinterface.js'][389]++;
  return Math.pow(2, (14 - zoom));
}), codeAddress: (function (address) {
  _$jscoverage['js/userinterface.js'][400]++;
  geocoder.geocode({"address": address}, (function (results, status) {
  _$jscoverage['js/userinterface.js'][401]++;
  if ((status == google.maps.GeocoderStatus.OK)) {
    _$jscoverage['js/userinterface.js'][403]++;
    mypos = results[0].geometry.location;
    _$jscoverage['js/userinterface.js'][404]++;
    map.setCenter(mypos);
    _$jscoverage['js/userinterface.js'][405]++;
    update();
  }
  else {
    _$jscoverage['js/userinterface.js'][408]++;
    alert(("Geocode was not successful for the following reason: " + status));
  }
}));
})};
_$jscoverage['js/userinterface.js'][416]++;
function update() {
  _$jscoverage['js/userinterface.js'][418]++;
  var xmlHttp = new XMLHttpRequest();
  _$jscoverage['js/userinterface.js'][420]++;
  xmlHttp.onreadystatechange = (function () {
  _$jscoverage['js/userinterface.js'][422]++;
  if (((xmlHttp.readyState == 4) && (xmlHttp.status == 200) && xmlHttp.responseText)) {
    _$jscoverage['js/userinterface.js'][427]++;
    var tweets = JSON.parse(xmlHttp.responseText);
    _$jscoverage['js/userinterface.js'][429]++;
    if ((tweets.t != null)) {
      _$jscoverage['js/userinterface.js'][430]++;
      (LOG && console.log(("Results: " + tweets.t.length)));
    }
    _$jscoverage['js/userinterface.js'][434]++;
    for (var i in tweets.t) {
      _$jscoverage['js/userinterface.js'][437]++;
      var filter = tweets.f[i];
      _$jscoverage['js/userinterface.js'][438]++;
      var tweet = tweets.t[i];
      _$jscoverage['js/userinterface.js'][439]++;
      var rank = tweets.r[i];
      _$jscoverage['js/userinterface.js'][441]++;
      var user = tweet.user.screen_name;
      _$jscoverage['js/userinterface.js'][442]++;
      var pic = tweet.user.profile_image_url;
      _$jscoverage['js/userinterface.js'][443]++;
      var text = tweet.text;
      _$jscoverage['js/userinterface.js'][444]++;
      var follow = tweet.user.followers_count;
      _$jscoverage['js/userinterface.js'][445]++;
      var friends = tweet.user.friends_count;
      _$jscoverage['js/userinterface.js'][446]++;
      var c = new Date(tweet.created_at);
      _$jscoverage['js/userinterface.js'][452]++;
      if ((tweet.created_at.indexOf("lastUpdated :") < 0)) {
        _$jscoverage['js/userinterface.js'][453]++;
        var d = c.toDateString().split(" ");
        _$jscoverage['js/userinterface.js'][454]++;
        var t = c.toLocaleTimeString().split(":");
        _$jscoverage['js/userinterface.js'][455]++;
        var ampm = c.toLocaleTimeString().split(" ")[1];
        _$jscoverage['js/userinterface.js'][456]++;
        var created = (d[0] + ", " + d[1] + " " + d[2] + " " + t[0] + ":" + t[1] + " " + ampm);
      }
      else {
        _$jscoverage['js/userinterface.js'][459]++;
        var created = "";
        _$jscoverage['js/userinterface.js'][460]++;
        text = (text.split("**")[0] + text.split("**")[1] + text.split("**")[3]);
      }
      _$jscoverage['js/userinterface.js'][464]++;
      if (tweet.geo) {
        _$jscoverage['js/userinterface.js'][465]++;
        var x = tweet.geo.coordinates[0];
        _$jscoverage['js/userinterface.js'][466]++;
        var y = tweet.geo.coordinates[1];
      }
      else {
        _$jscoverage['js/userinterface.js'][470]++;
        var x = 25.758102000000001;
        _$jscoverage['js/userinterface.js'][471]++;
        var y = -80.373632999999998;
      }
      _$jscoverage['js/userinterface.js'][476]++;
      var contentString = ("" + "<div id=\"content\" style=\"width:304px; height:176px;\">" + "<div id=\"siteNotice\">" + "<div style=\"float:left;border:0px solid blue;\">" + "<a href=\"https://twitter.com/" + user + "\" target=\"_blank\" title=\"Visit " + user + "'s profile\"><h4 id=\"firstHeading\" class=\"firstHeading\">" + user + "</h4></a>" + "</div>" + "<div style=\"float:right;border:0px solid red;width=50%;\">" + "<p>Followers: " + follow + "<br/>" + "Friends: " + friends + "</p>" + "</div>" + "</div>" + "<div id=\"bodyContent\" style=\"float:left;border:0px solid blue;height:100px;\">" + "<div style=\"float:left;border:0px solid blue;width:204px;\">" + "<p style=\"max-width:200px\">" + tagAnchors(text) + "</p>" + "</div>" + "<div style=\"float:right;border:0px solid red;width=100%;height=100%;\">" + "<img name=\"userpic\" src=\"" + pic + "\"></img>" + "</div>" + "</div>" + "<div id=\"options\" style=\"float:left;border:0px solid blue;width:100%;\">" + "<div id=\"footer\" style=\"float:right;border:0px solid black;\">" + "<p>" + created + "</p>" + "</div>" + "<a href=\"http://maps.google.com/maps/?saddr=Current%20Location&daddr=" + user + "@" + x + "," + y + "\" title=\"Navigate here from current position\" target=\"_blank\">Go here</a> | " + "<a href=\"javascript:showSearch(true);\" title=\"Search for places near here\">Search Nearby</a> | " + "<a href=\"javascript:vote(" + x + "," + y + ");\" title=\"Vote up/down this tweet\">Vote</a>" + "<div id=\"detail\" style=\"visibility:hidden;float:left;border:0px solid blue;width:100%;\">" + "<form  role=\"search\" onsubmit=\"places.searchNear(this.children[0]);return false;\">" + "<input id=\"target\" type=\"text\"><img src=\"image/x.png\" style=\"margin-left:5px;\" onclick=\"showSearch(false);\">" + "</div>" + "</div>" + "</div>");
      _$jscoverage['js/userinterface.js'][514]++;
      var image = {url: pic, size: new (google.maps.Size)(71, 71), origin: new (google.maps.Point)(0, 0), anchor: new (google.maps.Point)(17, 34), scaledSize: new (google.maps.Size)(25, 25)};
      _$jscoverage['js/userinterface.js'][523]++;
      var marker = new (google.maps.Marker)({position: new (google.maps.LatLng)(x, y), icon: ((refresh != "raw.php")? ("image/" + color(rank) + legend.getIcons(filter)): image), animation: google.maps.Animation.DROP, title: text});
      _$jscoverage['js/userinterface.js'][533]++;
      if ((manager.getMarker(x, y, 0) == null)) {
        _$jscoverage['js/userinterface.js'][534]++;
        Markers.push(marker, filter, contentString);
        _$jscoverage['js/userinterface.js'][535]++;
        manager.addMarker(marker, 0);
        _$jscoverage['js/userinterface.js'][536]++;
        manager.refresh();
      }
      else {
      }
}
  }
});
  _$jscoverage['js/userinterface.js'][545]++;
  lat = map.getCenter().lat();
  _$jscoverage['js/userinterface.js'][546]++;
  lng = map.getCenter().lng();
  _$jscoverage['js/userinterface.js'][547]++;
  zoom = map.getZoom();
  _$jscoverage['js/userinterface.js'][550]++;
  rad = Map.zoom2rad(zoom);
  _$jscoverage['js/userinterface.js'][555]++;
  var s = (refresh + "?lat=" + lat + "&lng=" + lng + "&rad=" + rad + "&filter=" + legend.getFilters());
  _$jscoverage['js/userinterface.js'][556]++;
  (LOG && console.log(("Request: " + s)));
  _$jscoverage['js/userinterface.js'][563]++;
  xmlHttp.open("GET", s, true);
  _$jscoverage['js/userinterface.js'][564]++;
  xmlHttp.send(null);
}
_$jscoverage['js/userinterface.js'][573]++;
function tagAnchors(s) {
  _$jscoverage['js/userinterface.js'][574]++;
  var p = /https?:[^( |,|\u00e2\u0080\u009d|\u00e2\u0080\u009c|")]*/g;
  _$jscoverage['js/userinterface.js'][576]++;
  if (p.test(s)) {
    _$jscoverage['js/userinterface.js'][577]++;
    s = s.replace(p, "<a href=$& target='_blank'>$&</a>");
  }
  _$jscoverage['js/userinterface.js'][580]++;
  return s;
}
_$jscoverage['js/userinterface.js'][583]++;
function vote(x, y) {
  _$jscoverage['js/userinterface.js'][586]++;
  var m = manager.getMarker(x, y, 0);
  _$jscoverage['js/userinterface.js'][587]++;
  m.setMap(null);
  _$jscoverage['js/userinterface.js'][588]++;
  manager.removeMarker(m);
  _$jscoverage['js/userinterface.js'][589]++;
  manager.refresh();
}
_$jscoverage['js/userinterface.js'][616]++;
function showSearch(t) {
  _$jscoverage['js/userinterface.js'][617]++;
  document.getElementById("detail").style.visibility = ((t == true)? "": "hidden");
}
_$jscoverage['js/userinterface.js'][628]++;
function initialize() {
  _$jscoverage['js/userinterface.js'][632]++;
  compass = new Compass(document.getElementById("compass"));
  _$jscoverage['js/userinterface.js'][633]++;
  places = new Places();
  _$jscoverage['js/userinterface.js'][634]++;
  geocoder = new (google.maps.Geocoder)();
  _$jscoverage['js/userinterface.js'][635]++;
  legend = new Legend(document.getElementById("legend"));
  _$jscoverage['js/userinterface.js'][639]++;
  if ((location.search.indexOf("raw=") > -1)) {
    _$jscoverage['js/userinterface.js'][640]++;
    refresh = ((location.search.split("raw=")[1].split("&")[0] == "true")? "raw.php": refresh);
  }
  _$jscoverage['js/userinterface.js'][641]++;
  if ((location.search.indexOf("lat=") > -1)) {
    _$jscoverage['js/userinterface.js'][642]++;
    lat = location.search.split("lat=")[1].split("&")[0];
  }
  _$jscoverage['js/userinterface.js'][643]++;
  if ((location.search.indexOf("lng=") > -1)) {
    _$jscoverage['js/userinterface.js'][644]++;
    lng = location.search.split("lng=")[1].split("&")[0];
  }
  _$jscoverage['js/userinterface.js'][645]++;
  if ((location.search.indexOf("filter=") > -1)) {
    _$jscoverage['js/userinterface.js'][646]++;
    legend.setPreFilters(location.search.split("filter=")[1].split("&")[0]);
  }
  _$jscoverage['js/userinterface.js'][647]++;
  if ((location.search.indexOf("zoom=") > -1)) {
    _$jscoverage['js/userinterface.js'][648]++;
    zoom = parseInt(location.search.split("zoom=")[1].split("&")[0]);
  }
  _$jscoverage['js/userinterface.js'][649]++;
  if ((location.search.indexOf("live=") > -1)) {
    _$jscoverage['js/userinterface.js'][650]++;
    live = (location.search.split("live=")[1].split("&")[0] == "true");
  }
  _$jscoverage['js/userinterface.js'][651]++;
  if ((location.search.indexOf("log=") > -1)) {
    _$jscoverage['js/userinterface.js'][652]++;
    LOG = (location.search.split("log=")[1].split("&")[0] == "true");
  }
  _$jscoverage['js/userinterface.js'][657]++;
  var mapOptions = {zoom: zoom, center: new (google.maps.LatLng)(lat, lng), mapTypeId: google.maps.MapTypeId.ROADMAP, disableDefaultUI: true};
  _$jscoverage['js/userinterface.js'][664]++;
  map = new (google.maps.Map)(document.getElementById("map-canvas"), mapOptions);
  _$jscoverage['js/userinterface.js'][667]++;
  var mgrOptions = {borderPadding: 0, maxZoom: 1};
  _$jscoverage['js/userinterface.js'][668]++;
  manager = new MarkerManager(map, mgrOptions);
  _$jscoverage['js/userinterface.js'][674]++;
  google.maps.event.addListener(map, "tilesloaded", (function () {
  _$jscoverage['js/userinterface.js'][675]++;
  update();
  _$jscoverage['js/userinterface.js'][676]++;
  garbagecollect();
}));
  _$jscoverage['js/userinterface.js'][681]++;
  google.maps.event.addListener(map, "zoom_changed", (function () {
  _$jscoverage['js/userinterface.js'][682]++;
  Markers.closeAll();
}));
  _$jscoverage['js/userinterface.js'][684]++;
  google.maps.event.addListener(map, "dragend", (function () {
  _$jscoverage['js/userinterface.js'][685]++;
  Markers.closeAll();
}));
  _$jscoverage['js/userinterface.js'][688]++;
  google.maps.event.addListener(map, "click", (function () {
  _$jscoverage['js/userinterface.js'][689]++;
  Markers.closeAll();
}));
  _$jscoverage['js/userinterface.js'][695]++;
  (live && setInterval((function () {
  _$jscoverage['js/userinterface.js'][695]++;
  update();
  _$jscoverage['js/userinterface.js'][695]++;
  garbagecollect();
}), 5000));
  _$jscoverage['js/userinterface.js'][699]++;
  map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(legend.htmlObj);
  _$jscoverage['js/userinterface.js'][700]++;
  map.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(compass.htmlObj);
  _$jscoverage['js/userinterface.js'][703]++;
  return 0;
}
_$jscoverage['js/userinterface.js'][706]++;
function garbagecollect() {
  _$jscoverage['js/userinterface.js'][707]++;
  (LOG && console.log(("GC Before:" + manager.getMarkerCount(0))));
  _$jscoverage['js/userinterface.js'][709]++;
  while ((manager.getMarkerCount(0) > 1000)) {
    _$jscoverage['js/userinterface.js'][710]++;
    manager.removeMarker(Markers.markers.shift());
}
  _$jscoverage['js/userinterface.js'][712]++;
  (LOG && console.log(("GC After:" + manager.getMarkerCount(0))));
}
_$jscoverage['js/userinterface.js'][718]++;
google.maps.event.addDomListener(window, "load", initialize);
